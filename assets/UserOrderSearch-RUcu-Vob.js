import{_ as w,m as S,a as T,r as u,o as r,c as l,b as t,d as a,w as h,F as m,x as g,t as s,A as b,g as d}from"./index-TFW6QGXf.js";import{u as x}from"./userOrderStore-K1Ff7jc_.js";import{O as F}from"./OrderSteps-Wl066b0C.js";import{t as C}from"./timestampToDate-lwWXufjj.js";import{F as E}from"./FundraisingSteps-kFJhwpbj.js";import"./showSuccessToast-TNVcc7d0.js";import"./showErrorToast-H8uiVGa1.js";const j={components:{FundraisingSteps:E,OrderSteps:F},data(){return{currentOrderSteps:3,currentFundraisingSteps:2,tempProductId:"",tempOrderId:""}},watch:{"$route.params.orderId":{handler(e){this.getOrder(e)},immediate:!0}},mounted(){const{orderId:e}=this.$route.params;this.tempOrderId=e,this.getOrder(this.tempOrderId)},computed:{...S(x,["tempOrder","productQtyMap"])},methods:{...T(x,["getOrder","calculateQty"]),formatDate(e){const{formattedDate:c,formattedTime:y}=C(e);return{formattedDate:c,formattedTime:y}},goToHome(){this.$router.push({name:"home"})},goToPayment(e){this.currentOrderSteps=1,this.$router.push({name:"payment",params:{id:e}})}}},I={class:"mx-3 mx-lg-10"},N={class:"container px-lg-12 mb-3 mb-lg-6"},D={class:"row row-cols-1 gy-3 gy-lg-6 row-cols-md-2 px-md-2 px-lg-3 px-xl-4"},$={class:"col px-xl-4"},P={class:"h-100 d-flex flex-column gap-4"},Q={class:"d-flex gap-2 mb-3","aria-label":"breadcrumb"},V={class:"text-dark-gray"},B=t("small",{class:"text-dark-gray"},"/",-1),H={class:"text-dark-gray"},L=t("h2",{class:"fs-4 card-title fw-bold mb-3"}," 訂單查詢結果 ",-1),M={class:"col px-xl-4"},A={class:"mx-3 mx-lg-10"},R={class:"container px-lg-12 py-3 py-lg-6"},U={class:"row row-cols-1"},q={class:"col-md-6 col-lg-5 px-xl-4"},z=["src"],G={class:"text-dark-gray fw-normal mb-0"},J={class:"d-flex justify-content-between"},K={class:"mb-0"},W={class:"d-flex gap-2"},X={class:"fs-5 fw-bold mb-0"},Y={class:"badge bg-info-light text-black"},Z={class:"text-dark-gray d-block mb-1"},tt={class:"d-flex"},et={key:0,class:"badge text-dark-gray fw-normal me-2",style:{"background-color":"#E9ECEF"}},st=t("span",{class:"badge text-dark-gray fw-normal",style:{"background-color":"#E9ECEF"}},"目標達成 3 個月內出貨",-1),ot=t("hr",{class:"w-100 border-top my-1",style:{border:"3px dotted #8C8C8E"}},null,-1),rt=t("small",{class:"text-dark-gray"},"一組內含：",-1),lt={class:"list-unstyled mb-0"},dt=t("div",{class:"d-flex align-items-center gap-2"},[t("i",{class:"bi bi-check-circle-fill text-dark-secondary"}),t("small",null,"臺灣本島免運、可寄離島")],-1),nt={class:"col-md-6 col-lg-7 px-xl-4 gy-3 gy-md-0"},at={class:"rounded-5 border border-5 border-light p-5 h-100 position-sticky top-0"},ct={class:"row row-cols-1 gy-5"},it={class:"col px-8 px-xl-10"},mt={class:"row row-cols-1 row-cols-sm-2 align-items-center mb-4"},pt={class:"col-sm-7"},_t={class:"d-flex gap-2 text-dark-gray mb-2"},ut=t("span",null,"訂單時間",-1),ht={key:0},gt={class:"d-flex gap-2 text-dark-gray"},bt=t("span",null,"訂單編號",-1),yt={class:"col-sm-5"},ft={key:0,class:"d-flex justify-content-start justify-content-sm-center align-items-center gap-2 gap-lg-4 pt-4 pt-sm-0"},xt=t("i",{class:"bi bi-check-circle-fill text-dark-secondary fs-4"},null,-1),kt=t("h4",{class:"mb-0"},"完成付款",-1),vt=[xt,kt],Ot={key:1,class:"d-flex justify-content-start justify-content-sm-center align-items-center gap-2 gap-lg-4 pt-4 pt-sm-0"},wt=t("i",{class:"bi bi-check-circle-fill text-dark-secondary fs-4"},null,-1),St=t("h4",{class:"mb-0"},"預購成功",-1),Tt=[wt,St],Ft={class:"col px-xl-5"},Ct={class:"d-flex flex-column justify-content-between"},Et={class:"rounded-5 border border-light border-3 p-4 mb-5"},jt=t("thead",null,[t("tr",null,[t("th",{scope:"col",colspan:"3",class:"fs-5"},"預購資訊")])],-1),It={class:"align-middle"},Nt=t("th",{scope:"row"},[d("預購"),t("br",{class:"d-414-block"}),d("金額")],-1),Dt={class:"fs-5 fw-bold"},$t={key:0,class:"d-flex gap-2 mt-1"},Pt=t("i",{class:"bi bi-check-circle-fill text-dark-secondary"},null,-1),Qt={class:"text-dark-gray"},Vt={class:"text-dark-gray"},Bt=t("th",{scope:"row"},[d("收件"),t("br",{class:"d-414-block"}),d("訊息")],-1),Ht={colspan:"2"},Lt={class:"list-unstyled mb-0 text-dark-gray"},Mt=t("th",{scope:"row"},[d("付款"),t("br",{class:"d-414-block"}),d("狀態")],-1),At={colspan:"2"},Rt={class:"d-flex align-items-center gap-2"},Ut={key:0,class:"text-dark-gray"},qt=["onClick"],zt={class:"text-end"};function Gt(e,c,y,Jt,i,n){const p=u("RouterLink"),k=u("FundraisingSteps"),v=u("OrderSteps");return r(),l(m,null,[t("div",I,[t("div",N,[t("div",D,[t("div",$,[t("div",P,[t("nav",Q,[t("small",V,[a(p,{to:{name:"home"},class:"nav-link text-decoration-none text-nowrap"},{default:h(()=>[d(s(e.$t("menu.home")),1)]),_:1})]),B,t("small",H,[a(p,{to:{name:"products"},class:"nav-link text-decoration-none text-nowrap"},{default:h(()=>[d(s(e.$t("menu.products")),1)]),_:1})])]),L,a(p,{to:{name:"home"},class:"btn btn-primary w-25"},{default:h(()=>[d("回首頁")]),_:1})])]),t("div",M,[a(k,{currentFundraisingSteps:i.currentFundraisingSteps},null,8,["currentFundraisingSteps"])])])])]),a(v,{currentOrderSteps:i.currentOrderSteps},null,8,["currentOrderSteps"]),t("div",A,[t("div",R,[t("div",U,[t("div",q,[(r(!0),l(m,null,g(e.tempOrder.products,(o,_)=>(r(),l("div",{key:_,class:"d-flex flex-column justify-content-between rounded-5 border border-5 border-light p-5 gap-3 position-relative mb-3"},[t("img",{src:o.product.imageUrl,alt:"product-image",class:"card-img-top object-fit-cover img-fluid rounded",style:{"max-height":"200px"}},null,8,z),t("h6",G,s(o.product.short_title),1),t("div",J,[t("h5",K,s(o.qty)+" 入組",1),t("div",W,[t("h6",X,"NT$ "+s(e.tempOrder.total),1),t("span",Y,s(o.product.discount*100)+"折",1)])]),t("div",null,[t("small",Z,[d("預定售價 "),t("del",null,"NT$ "+s(o.product.origin_price),1),d("，折扣後 NT$ "+s(o.product.origin_price*o.product.discount),1)]),t("div",tt,[e.productQtyMap[i.tempProductId]?(r(),l("span",et,"預購人數 "+s(e.productQtyMap[i.tempProductId].orderQty)+" 次",1)):b("",!0),st])]),ot,t("div",null,[rt,t("ul",lt,[(r(!0),l(m,null,g(o.product.contents,(f,O)=>(r(),l("li",{key:O},s(f),1))),128))])]),dt]))),128))]),t("div",nt,[t("div",at,[t("div",ct,[t("div",it,[t("div",mt,[t("div",pt,[t("div",_t,[ut,e.tempOrder.create_at?(r(),l("span",ht,s(n.formatDate(e.tempOrder.create_at).formattedDate)+" "+s(n.formatDate(e.tempOrder.create_at).formattedTime),1)):b("",!0)]),t("div",gt,[bt,t("span",null,s(e.tempOrder.id),1)])]),t("div",yt,[e.tempOrder.is_paid?(r(),l("div",ft,vt)):(r(),l("div",Ot,Tt))])])]),t("div",Ft,[t("div",Ct,[t("div",Et,[(r(!0),l(m,null,g(e.tempOrder.products,(o,_)=>(r(),l("table",{key:_,class:"table table-border mb-0"},[jt,t("tbody",It,[t("tr",null,[Nt,t("td",null,[t("span",Dt,"NT$ "+s(o.final_total)+"元",1),o.coupon?(r(),l("div",$t,[Pt,t("span",Qt,"已使用優惠卷："+s(o.coupon.code),1),t("span",Vt,s(o.coupon.title),1)])):b("",!0)])]),t("tr",null,[Bt,t("td",Ht,[t("ul",Lt,[t("li",null,"姓名："+s(e.tempOrder.user.name),1),t("li",null,"手機："+s(e.tempOrder.user.tel),1),t("li",null,"Email："+s(e.tempOrder.user.email),1),t("li",null,"運送："+s(e.tempOrder.user.shipment),1),t("li",null,"地址："+s(e.tempOrder.user.postcode)+s(e.tempOrder.user.country)+s(e.tempOrder.user.city)+s(e.tempOrder.user.region)+s(e.tempOrder.user.address),1),t("li",null,"備註："+s(e.tempOrder.user.message),1)])])]),t("tr",null,[Mt,t("td",At,[t("div",Rt,[e.tempOrder.is_paid?(r(),l("span",Ut,"已付款")):(r(),l("button",{key:1,onClick:f=>n.goToPayment(o.product_id),class:"btn btn-primary-light text-white",type:"button"},"前往付款",8,qt))])])])])]))),128))]),t("div",zt,[t("button",{onClick:c[0]||(c[0]=(...o)=>n.goToHome&&n.goToHome(...o)),type:"button",class:"btn btn-primary text-white"},"前往首頁")])])])])])])])])])],64)}const se=w(j,[["render",Gt]]);export{se as default};
