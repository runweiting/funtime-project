import{B as v,D as p,m as $,s as O,_ as T,o as r,c as i,a as n,y as l,I as d,F as k,u as E,t as h}from"./index-xBDQSGV2.js";import{s as m}from"./showSuccessToast-rejBPG22.js";import{s as S}from"./showErrorToast-8bqWWuy4.js";var A={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"runweiting",VITE_TEXT:"這是部屬完成的環境",BASE_URL:"/funtime-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:c,VITE_APP_PATH:g}=A,f=v({id:"adminOrdersStore",state:()=>({orderList:[],pagination:{},currentPage:null}),actions:{getOrders(e=1){const a=`${c}/api/${g}/admin/orders?page=${e}`;p.get(a).then(s=>{const{orders:o,pagination:u}=s.data,_=o.map(t=>({...t,calculateTotal:this.updateTotal(t)}));this.orderList=_,this.pagination=u,this.currentPage=e}).catch(s=>{S(s.response)})},updateTotal(e){if(!e||!e.products)return 0;let a=0;return Object.values(e.products).forEach(s=>{a+=s.qty*s.product.price}),a},deleteOrder(e,a){const s=`${c}/api/${g}/admin/order/${e}`;p.delete(s).then(o=>{m(o.data.message),this.getOrders(a)})},deleteOrders(){const e=`${c}/api/${g}/admin/orders/all`;p.delete(e).then(a=>{m(a.data.message),this.getOrders()})}}}),V={computed:{...$(f,["pagination"])},methods:{...O(f,["getOrders"])}},b={class:"px-4"},y={"aria-label":"Page navigation example"},I={class:"pagination"},L=n("span",{"aria-hidden":"true"},"«",-1),w=[L],B={key:0,class:"page-link"},C=["onClick"],D=n("span",{"aria-hidden":"true"},"»",-1),R=[D];function F(e,a,s,o,u,_){return r(),i("div",b,[n("nav",y,[n("ul",I,[n("li",{class:l([{disabled:e.pagination.current_page===1},"page-item"])},[n("a",{onClick:a[0]||(a[0]=d(t=>e.getOrders(e.pagination.current_page-1),["prevent"])),class:"page-link",href:"#","aria-label":"Previous"},w)],2),(r(!0),i(k,null,E(e.pagination.total_pages,(t,P)=>(r(),i("li",{key:P,class:l([{active:t===e.pagination.current_page},"page-item"])},[t===e.pagination.current_page?(r(),i("span",B,h(t),1)):(r(),i("a",{key:1,onClick:d(U=>e.getOrders(t),["prevent"]),class:"page-link",href:"#"},h(t),9,C))],2))),128)),n("li",{class:l([{disabled:e.pagination.current_page===e.pagination.total_pages},"page-item"])},[n("a",{onClick:a[1]||(a[1]=d(t=>e.getOrders(e.pagination.current_page+1),["prevent"])),class:"page-link",href:"#","aria-label":"Next"},R)],2)])])])}const N=T(V,[["render",F]]);export{N as P,f as a};
