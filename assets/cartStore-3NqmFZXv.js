import{u as l,v as o}from"./index-nIaOHvfA.js";import{s as i}from"./showSuccessToast-LuDJjneU.js";import{s as r}from"./showErrorToast-bJNqnV0F.js";const p=l({id:"loadingStore",state:()=>({loadingStatus:{getProduct:"",updateQty:""}})});var g={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"runweiting",VITE_TEXT:"這是部屬完成的環境",BASE_URL:"/funtime-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:c,VITE_APP_PATH:d}=g,S=l("cartStore",{state:()=>({cartList:[],cartTotal:0}),actions:{addToCart(a,t=1){const s=p();s.loadingStatus.updateQty=a;const n=`${c}/api/${d}/cart`,e={product_id:a,qty:t};o.post(n,{data:e}).then(u=>{i(u.data.message),s.loadingStatus.updateQty="",this.getCart()}).catch(u=>{r(u.response.data.message)})},getCart(){const a=`${c}/api/${d}/cart`;o.get(a).then(t=>{this.cartList=t.data.data.carts,this.cartTotal=t.data.data.total}).catch(t=>{r(t.response.data.message)})},async putCart(a){const t=p();t.loadingStatus.updateQty=a.id;const s=`${c}/api/${d}/cart/${a.id}`,n={product_id:a.product_id,qty:a.qty};try{const e=await o.put(s,{data:n});i(e.data.message),t.loadingStatus.updateQty=""}catch(e){r(e.response.data.message)}finally{this.getCart()}},deleteCart(a){const t=`${c}/api/${d}/cart/${a}`;o.delete(t).then(s=>{i(s.data.message),this.getCart()}).catch(s=>{r(s.response.data.message)})},deleteCarts(){const a=`${c}/api/${d}/carts`;o.delete(a).then(t=>{i(t.data.message),this.getCart()}).catch(t=>{r(t.response.data.message)})}}});export{S as c,p as l};
