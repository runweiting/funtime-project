import{_ as p,I as c,S as n,r as _,o as f,c as h,a as e,x as d,G as u,b as g,w as x,e as w}from"./index-WxtyeiqM.js";import{s as T}from"./showSuccessToast-amH4LwP2.js";var k={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"runweiting",VITE_TEXT:"這是部屬完成的環境",BASE_URL:"/funtime-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:v}=k,b={data(){return{user:{username:"",password:""}}},methods:{deleteOldToken(){document.cookie="myToken=; expires=; path=/;"},login(){if(this.deleteOldToken(),c()){this.goToAdmin();return}const r=`${v}/admin/signin`;this.axios.post(r,this.user).then(t=>{const{expired:i,token:a}=t.data;document.cookie=`myToken=${a}; expires=${new Date(i)}`,T(t.data.message).then(()=>{this.goToAdmin()}),this.user={}}).catch(t=>{t.response&&t.response.status===400?n.fire({title:"請輸入正確的帳號和密碼",icon:"error",confirmButtonText:"OK"}):(this.user.username===""||this.user.password==="")&&n.fire({title:"請輸入登入信箱和密碼",icon:"error",confirmButtonText:"OK"})})},goToAdmin(){c()?this.$router.push({name:"admin"}):(n.fire({title:"請先登入",icon:"error",confirmButtonText:"OK"}),this.$router.push({name:"login"}))}}},P={class:"container"},E=e("h1",{class:"pt-5 text-center"},"登入後台",-1),V={class:"row py-5 flex-column align-items-center"},y=e("div",{class:"col-md-6 text-center mb-3"},[e("h3",null,"請先登入")],-1),A={class:"col-md-6"},I={class:"form-floating mb-3"},B=e("label",{for:"floatingInput"},"Email address",-1),O={class:"form-floating mb-3"},U=e("label",{for:"floatingPassword"},"Password",-1),S={class:"d-flex gap-2"},D=e("p",{class:"text-dark-gray text-center pt-5"},"© funtime",-1);function L(r,t,i,a,o,l){const m=_("router-link");return f(),h("main",P,[E,e("div",V,[y,e("div",A,[e("form",null,[e("div",I,[d(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.user.username=s),type:"email",class:"form-control",id:"floatingInput",placeholder:"name@example.com",autocomplete:"email"},null,512),[[u,o.user.username]]),B]),e("div",O,[d(e("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>o.user.password=s),type:"password",class:"form-control",id:"floatingPassword",placeholder:"Password",autocomplete:"current-password"},null,512),[[u,o.user.password]]),U]),e("div",S,[g(m,{to:"/",class:"btn btn-primary w-50"},{default:x(()=>[w("回到首頁")]),_:1}),e("button",{onClick:t[2]||(t[2]=(...s)=>l.login&&l.login(...s)),type:"button",class:"btn btn-primary w-50"}," 登入 ")])]),D])])])}const K=p(b,[["render",L]]);export{K as default};
