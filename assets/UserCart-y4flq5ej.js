import{I as V,s as _,_ as h,r as n,o as g,c as b,a as e,t as x,b as o,w as S,B as m,z as C,J as w,S as p}from"./index-mrn3Z3o4.js";import{c as O}from"./cartStore-gPQ5Eopz.js";import{C as y}from"./CartList-rEt8e0Qy.js";import{c as U}from"./couponsStore-YQAEtB1v.js";import"./showSuccessToast-yeD6Bdgu.js";import"./showErrorToast-Ee6WUOWD.js";const E={emits:["sendOrder"],data(){return{title:"訂購訊息",data:{user:{name:"",email:"",tel:"",address:""},message:""}}},components:{ErrorMessage:V},methods:{..._(U,["clearCoupon"]),onSubmit(){this.$emit("sendOrder",this.data),this.clearCoupon()},resetForm(){this.$refs.form.resetForm(),this.data.message=""}}},F={class:"col-8",style:{"padding-inline":"4.5rem"}},$={class:"form-floating mb-3"},k=e("label",{for:"floatingEmail",class:"form-label"},"Email",-1),B={class:"form-floating mb-3"},D=e("label",{for:"floatingName",class:"form-label"},"收件人姓名",-1),T={class:"form-floating mb-3"},q=e("label",{for:"floatingTel",class:"form-label"},"收件人電話",-1),M={class:"form-floating mb-3"},N=e("label",{for:"floatingAddress",class:"form-label"},"收件人地址",-1),A={class:"mb-3"},z=e("label",{for:"message",class:"form-label"},"留言",-1),K=e("div",{class:"text-end"},[e("button",{type:"submit",class:"btn btn-danger"},"送出訂單")],-1);function P(c,s,u,i,t,f){const l=n("VField"),r=n("ErrorMessage"),v=n("VForm");return g(),b("div",F,[e("h2",null,x(t.title),1),o(v,{ref:"form",onSubmit:f.onSubmit},{default:S(({errors:d})=>[e("div",$,[o(l,{modelValue:t.data.user.email,"onUpdate:modelValue":s[0]||(s[0]=a=>t.data.user.email=a),rules:"required|email",class:m([{"is-invalid":d.email},"form-control"]),type:"email",id:"floatingEmail",name:"email",placeholder:"請輸入email"},null,8,["modelValue","class"]),k,o(r,{name:"email",class:"invalid-feedback"})]),e("div",B,[o(l,{modelValue:t.data.user.name,"onUpdate:modelValue":s[1]||(s[1]=a=>t.data.user.name=a),rules:"required",class:m([{"is-invalid":d.姓名},"form-control"]),type:"text",id:"floatingName",name:"姓名",placeholder:"請輸入姓名"},null,8,["modelValue","class"]),D,o(r,{name:"姓名",class:"invalid-feedback"})]),e("div",T,[o(l,{modelValue:t.data.user.tel,"onUpdate:modelValue":s[2]||(s[2]=a=>t.data.user.tel=a),rules:"required|min:8|max:10",class:m([{"is-invalid":d.電話},"form-control"]),type:"tel",id:"floatingTel",name:"電話",placeholder:"請輸入電話"},null,8,["modelValue","class"]),q,o(r,{name:"電話",class:"invalid-feedback"})]),e("div",M,[o(l,{modelValue:t.data.user.address,"onUpdate:modelValue":s[3]||(s[3]=a=>t.data.user.address=a),rules:"required",class:m([{"is-invalid":d.地址},"form-control"]),type:"text",id:"floatingAddress",name:"地址",placeholder:"請輸入地址"},null,8,["modelValue","class"]),N,o(r,{name:"地址",class:"invalid-feedback"})]),e("div",A,[z,C(e("textarea",{"onUpdate:modelValue":s[4]||(s[4]=a=>t.data.message=a),id:"message",cols:"30",rows:"10",class:"form-control"},null,512),[[w,t.data.message]])]),K]),_:1},8,["onSubmit"])])}const I=h(E,[["render",P]]),J={components:{CartList:y,OrderDetail:I},data(){return{apiUrl:"https://vue3-course-api.hexschool.io/v2",apiPath:"runweiting"}},methods:{..._(O,["getCart"]),createOrder(c){const s={data:c},u=`${this.apiUrl}/api/${this.apiPath}/order`;this.axios.post(u,s).then(i=>{p.fire({title:i.data.message,icon:"success",confirmButtonText:"OK"}),this.$refs.orderDetail.resetForm(),this.getCart()}).catch(i=>{p.fire({title:i.data.message,icon:"error",confirmButtonText:"OK"})})}}},L={class:"container"},j=e("h1",{class:"pt-5 text-center"},"我的購物車",-1),G={class:"row"},H={class:"col"},Q={class:"col"};function R(c,s,u,i,t,f){const l=n("cart-list"),r=n("order-detail");return g(),b("div",L,[j,e("div",G,[e("div",H,[o(l,{class:"w-100 py-3"})]),e("div",Q,[o(r,{class:"w-100 mt-4 p-3",onSendOrder:f.createOrder,ref:"orderDetail"},null,8,["onSendOrder"])])])])}const te=h(J,[["render",R]]);export{te as default};
