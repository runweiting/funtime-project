import{y as D,z as L,A as w,m as C,s as x,_ as E,o as i,c,a as e,t as u,C as r,D as a,F as h,u as g,x as I,I as V,J as F,K as A,d as O,e as S,r as y,b as k}from"./index-fCAb3gEa.js";import{s as N}from"./showSuccessToast-LIQr3UAc.js";import{s as U}from"./showErrorToast-_Do5t9Hk.js";import{m as M,P as R}from"./PaginationGroup-v9DqPeQp.js";var j={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"runweiting",BASE_URL:"/funtime-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const G=D.useLoading({}),{VITE_APP_URL:P,VITE_APP_PATH:v}=j,f=L("adminProductsStore",{mixins:[M],state:()=>({productList:[],pagination:{},isEditModalOpen:!0,isDelModalOpen:!0,currentPage:null}),actions:{async getProducts(l,s=1){const p=G.show(),_=`${P}/api/${v}/admin/products?page=${s}`;try{const t=await w.get(_),{products:d,pagination:o}=t.data;this.productList=d,this.pagination=o,this.currentPage=s}catch(t){U(t.response.data.message)}finally{p.hide()}},updateProduct(l,s){let p=`${P}/api/${v}/admin/product`,_="post";l||(p=`${P}/api/${v}/admin/product/${s.id}`,_="put"),w[_](p,{data:s}).then(t=>{N(t.data.message),this.isEditModalOpen=!1,this.getProducts()}).catch(t=>{U(t.response.data.message)})},upload(){const s=document.querySelector("#formFile").files[0],p=new FormData;p.append("file-to-upload",s);const _=`${P}/api/${v}/admin/upload`;w.post(_,p)},deleteProduct(l){const s=`${P}/api/${v}/admin/product/${l}`;w.delete(s).then(p=>{N(p.data.message),this.isDelModalOpen=!1,this.getProducts()}).catch(p=>{U(p.response.data.message)})}}}),B={props:{tempProduct:Object,isNew:Boolean},mixins:[M],data(){return{selectedProduct:{productRatings:0,points:[],imagesUrl:[],tags:[],features:[],packages:[],contents:[],notes:[]},newPrice:0,newTag:"",newFeature:"",newPoint:{title:"",content:"",imageUrl:""},newPackage:{name:"",units:0},newContent:"",newNote:"",isInputEnabled:!0}},created(){this.selectedProduct={...this.tempProduct},this.selectedProduct.category=""},computed:{...C(f,["isEditModalOpen"])},watch:{tempProduct:{deep:!0,handler(l){this.selectedProduct=l}},isEditModalOpen:{handler(l){l||this.hideModal()}}},methods:{...x(f,["updateProduct","upload"]),calculatePrice(){this.newPrice=this.selectedProduct.origin_price*this.selectedProduct.discount,this.selectedProduct.price=this.newPrice},addTag(){this.newTag.trim()!==""&&(this.selectedProduct.tags.push(this.newTag.trim()),this.newTag="")},removeTag(l){this.selectedProduct.tags.splice(l,1)},addFeature(){this.newFeature.trim()!==""&&(this.selectedProduct.features.push(this.newFeature.trim()),this.newFeature="")},removeFeature(l){this.selectedProduct.features.splice(l,1)},addPoint(){this.newPoint.title.trim()!==""&&this.newPoint.content.trim()!==""&&this.newPoint.imageUrl.trim()!==""&&(this.selectedProduct.points.push(this.newPoint),this.newPoint={})},removePoint(l){this.selectedProduct.points.splice(l,1)},addPackage(){this.newPackage.name.trim()!==""&&this.newPackage.units!==0&&(this.selectedProduct.packages.push(this.newPackage),this.newPackage={})},removePackage(l){this.selectedProduct.packages.splice(l,1)},addContent(){this.newContent.trim()!==""&&(this.selectedProduct.contents.push(this.newContent.trim()),this.newContent="")},removeContent(l){this.selectedProduct.contents.splice(l,1)},addNote(){this.newNote.trim()!==""&&(this.selectedProduct.notes.push(this.newNote.trim()),this.newNote="")},removeNote(l){this.selectedProduct.notes.splice(l,1)},togglerEdit(){this.isInputEnabled=!this.isInputEnabled},cancelUpdate(){this.isInputEnabled=!0,this.selectedProduct={}}}},q={class:"modal fade",tabindex:"-1","aria-labelledby":"editModalLabel","aria-hidden":"true",ref:"modal"},K={class:"modal-dialog modal-xl modal-dialog-centered"},H={class:"modal-content"},z={class:"modal-header bg-dark opacity-75 text-white"},J={class:"modal-title",id:"editModalLabel"},Q={key:0},W={key:1},X=e("i",{class:"bi bi-x-lg"},null,-1),Y=[X],Z={class:"modal-body"},$={class:"container-fluid"},ee={class:"row mb-5"},te=e("div",{class:"col-md-3"},[e("h5",null,"專案內容")],-1),se={class:"col-md-9"},oe={class:"row"},le={class:"col-md-3"},de={class:"mb-4"},ne=e("label",{for:"imgUrl",class:"form-label"},"主要圖片",-1),ie=["disabled"],ce=["src"],re=e("h4",{class:"fw-bold"},"多圖新增",-1),ae={key:0,class:"mb-4"},ue=["for"],pe=["id","onUpdate:modelValue","disabled"],be=["src"],_e={class:"d-flex gap-2"},me=e("h4",{class:"fw-bold"},"上傳圖片",-1),he={class:"mb-4"},ge=["disabled"],fe={class:"col-md-9"},Pe={class:"row"},ve={class:"col-8"},we=e("label",{for:"title",class:"form-label"},"完整標題",-1),ye=["disabled"],ke={class:"col-4"},Ue=e("label",{for:"short-title",class:"form-label"},"簡短標題",-1),Ce=["disabled"],xe={class:"row mb-4"},Ee={class:"col"},Me=e("label",{for:"description",class:"form-label"},"專案描述",-1),Ie=["disabled"],Ve={class:"row mb-4"},Ne={class:"col"},Te=e("label",{for:"proposer",class:"form-label"},"提案人",-1),De=["disabled"],Le={class:"col"},Fe=e("label",{for:"tags",class:"form-label"},"標籤",-1),Ae={class:"input-group mb-2"},Oe=["disabled"],Se={class:"d-flex flex-wrap gap-2"},Re=["onClick"],je={class:"col"},Ge=e("label",{for:"features",class:"form-label"},"特色",-1),Be={class:"input-group mb-2"},qe=["disabled"],Ke={class:"d-flex flex-wrap gap-2"},He=["onClick"],ze={class:"row"},Je={class:"col"},Qe=e("label",{for:"category",class:"form-label"},"分類",-1),We=["disabled"],Xe=O('<option value="" disabled selected hidden>請輸入分類</option><option value="地圖">地圖</option><option value="卡牌">卡牌</option><option value="棋盤">棋盤</option><option value="擲骰">擲骰</option>',5),Ye=[Xe],Ze={class:"col"},$e=e("label",{for:"target_units",class:"form-label"},"目標組數",-1),et=["disabled"],tt={class:"col"},st=e("label",{for:"unit",class:"form-label"},"單位",-1),ot=["disabled"],lt=e("hr",{class:"w-100 border-top my-8",style:{border:"3px dotted #8C8C8E"}},null,-1),dt={class:"row mb-4"},nt={class:"col"},it=e("label",{for:"content_question",class:"form-label"},"困擾標題",-1),ct=["disabled"],rt={class:"row mb-4"},at={class:"col-4"},ut=e("label",{for:"point-title",class:"form-label"},"設計特點",-1),pt=["disabled"],bt={class:"col-8"},_t=e("label",{for:"point-content",class:"form-label"},"設計內容",-1),mt=["disabled"],ht={class:"row align-items-center mb-4"},gt={class:"col"},ft=e("label",{for:"point-imgUrl",class:"form-label"},"情境圖片",-1),Pt=["disabled"],vt={class:"col"},wt=["src"],yt={class:"col mt-auto"},kt={class:"row"},Ut={class:"col"},Ct={class:"row"},xt={class:"col-md-10"},Et={class:"text-wrap mb-2",style:{"overflow-wrap":"break-word"}},Mt={class:"text-wrap",style:{"overflow-wrap":"break-word"}},It={class:"col-md-2 ms-auto"},Vt=["onClick"],Nt=e("hr",{class:"w-100 border-top my-8",style:{border:"3px dotted #8C8C8E"}},null,-1),Tt={class:"row mb-4"},Dt={class:"col"},Lt=e("label",{for:"original-price",class:"form-label"},"售價",-1),Ft=["disabled"],At={class:"col"},Ot=e("label",{for:"discount",class:"form-label"},"折扣",-1),St=["disabled"],Rt={class:"col"},jt=e("label",{for:"original-price",class:"form-label"},"折扣價",-1),Gt={class:"row mb-4"},Bt={class:"col"},qt=e("label",{for:"package-name",class:"form-label"},"套裝名稱",-1),Kt=["disabled"],Ht={class:"col"},zt=e("label",{for:"package-units",class:"form-label"},"內含組數",-1),Jt=["disabled"],Qt={class:"col mt-auto"},Wt={class:"row mb-4"},Xt={class:"col"},Yt={class:"border border-gray border-1 rounded-2 p-2"},Zt={class:"mb-2"},$t={class:"ms-auto"},es=["onClick"],ts=e("div",{class:"col"},null,-1),ss={class:"row mb-4"},os={class:"col"},ls=e("label",{for:"contents",class:"form-label"},"內容物",-1),ds={class:"input-group"},ns=["disabled"],is={class:"col"},cs=e("label",{for:"notes",class:"form-label"},"備註",-1),rs={class:"input-group"},as=["disabled"],us={class:"row"},ps={class:"col"},bs={class:"border border-gray border-1 rounded-2 p-2"},_s={class:"text-wrap",style:{"overflow-wrap":"break-word"}},ms={class:"ms-auto"},hs=["onClick"],gs={class:"col"},fs={class:"border border-gray border-1 rounded-2 p-2"},Ps={class:"text-wrap",style:{"overflow-wrap":"break-word"}},vs={class:"ms-auto"},ws=["onClick"],ys=e("hr",{class:"w-100 border-top my-8",style:{border:"3px dotted #8C8C8E"}},null,-1),ks={class:"row"},Us={class:"col"},Cs=e("label",{for:"range",class:"form-label"},"商品評價",-1),xs={class:"ms-2 text-primary fw-bold fs-5"},Es=["disabled"],Ms={class:"col mt-auto"},Is={class:"form-check pb-2"},Vs=e("label",{class:"form-label m-0",for:"product-active"},"啟用商品",-1),Ns={class:"switch ms-2"},Ts=["disabled"],Ds=e("span",{class:"slider"},null,-1),Ls={class:"modal-footer"};function Fs(l,s,p,_,t,d){return i(),c("div",q,[e("div",K,[e("div",H,[e("div",z,[e("h5",J,[p.isNew?(i(),c("span",Q,"新增專案")):(i(),c("span",W,"編輯專案 ID:"+u(t.selectedProduct.id),1))]),e("button",{onClick:s[0]||(s[0]=(...o)=>d.cancelUpdate&&d.cancelUpdate(...o)),type:"button",class:"btn btn-outline-light","data-bs-dismiss":"modal","aria-label":"Close"},Y)]),e("div",Z,[e("div",$,[e("div",ee,[te,e("div",se,[e("button",{onClick:s[1]||(s[1]=(...o)=>d.togglerEdit&&d.togglerEdit(...o)),type:"button",class:"btn btn-warning"},"編輯商品")])]),e("div",oe,[e("div",le,[e("div",de,[ne,r(e("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>t.selectedProduct.imageUrl=o),disabled:t.isInputEnabled,type:"url",class:"form-control mb-2",id:"imgUrl",placeholder:"請輸入網址"},null,8,ie),[[a,t.selectedProduct.imageUrl]]),e("img",{src:t.selectedProduct.imageUrl,class:"img-fluid"},null,8,ce)]),re,Array.isArray(t.selectedProduct.imagesUrl)?(i(),c("div",ae,[(i(!0),c(h,null,g(t.selectedProduct.imagesUrl,(o,n)=>(i(),c("div",{key:`url${n}`},[e("label",{for:`url${n}`,class:"form-label"},"圖片網址",8,ue),r(e("input",{id:`url${n}`,"onUpdate:modelValue":m=>t.selectedProduct.imagesUrl[n]=m,disabled:t.isInputEnabled,type:"url",class:"form-control mb-2",placeholder:"請輸入網址"},null,8,pe),[[a,t.selectedProduct.imagesUrl[n]]]),e("img",{src:t.selectedProduct.imagesUrl[n],class:"img-fluid mb-2"},null,8,be)]))),128)),e("div",_e,[t.selectedProduct.imagesUrl.length===0||t.selectedProduct.imagesUrl[t.selectedProduct.imagesUrl.length-1]?(i(),c("button",{key:0,onClick:s[3]||(s[3]=o=>t.selectedProduct.imagesUrl.push("")),type:"button",class:"btn btn-primary w-100"}," 新增圖片 ")):I("",!0),e("button",{onClick:s[4]||(s[4]=o=>t.selectedProduct.imagesUrl.pop()),type:"button",class:"btn btn-danger text-white w-100"}," 刪除圖片 ")])])):I("",!0),me,e("div",he,[e("input",{onChange:s[5]||(s[5]=(...o)=>l.upload&&l.upload(...o)),disabled:t.isInputEnabled,class:"form-control",type:"file",id:"formFile",placeholder:"請輸入圖片連結"},null,40,ge)])]),e("div",fe,[e("div",Pe,[e("div",ve,[we,r(e("input",{"onUpdate:modelValue":s[6]||(s[6]=o=>t.selectedProduct.title=o),disabled:t.isInputEnabled,type:"text",class:"form-control mb-4",name:"full-title",placeholder:"請輸入完整標題"},null,8,ye),[[a,t.selectedProduct.title]])]),e("div",ke,[Ue,r(e("input",{"onUpdate:modelValue":s[7]||(s[7]=o=>t.selectedProduct.short_title=o),disabled:t.isInputEnabled,type:"text",class:"form-control mb-4",name:"short-title",placeholder:"請輸入簡單標題"},null,8,Ce),[[a,t.selectedProduct.short_title]])])]),e("div",xe,[e("div",Ee,[Me,r(e("textarea",{"onUpdate:modelValue":s[8]||(s[8]=o=>t.selectedProduct.description=o),disabled:t.isInputEnabled,class:"form-control",placeholder:"請輸入專案描述",id:"description",rows:"3"},null,8,Ie),[[a,t.selectedProduct.description]])])]),e("div",Ve,[e("div",Ne,[Te,r(e("input",{"onUpdate:modelValue":s[9]||(s[9]=o=>t.selectedProduct.proposer=o),disabled:t.isInputEnabled,type:"text",class:"form-control",id:"unit",placeholder:"請輸入名稱"},null,8,De),[[a,t.selectedProduct.proposer]])]),e("div",Le,[Fe,e("div",Ae,[r(e("input",{type:"text",class:"form-control",placeholder:"請輸入標籤","onUpdate:modelValue":s[10]||(s[10]=o=>t.newTag=o),onKeyup:s[11]||(s[11]=V((...o)=>d.addTag&&d.addTag(...o),["enter"])),disabled:t.isInputEnabled},null,40,Oe),[[a,t.newTag]]),e("button",{class:"btn btn-gray text-white",type:"button",onClick:s[12]||(s[12]=(...o)=>d.addTag&&d.addTag(...o))},"新增")]),e("div",Se,[(i(!0),c(h,null,g(t.selectedProduct.tags,(o,n)=>(i(),c("span",{class:"badge bg-primary d-flex align-items-center",key:n},[e("span",null,"# "+u(o),1),e("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:m=>d.removeTag(n),style:{scale:"0.75"}},null,8,Re)]))),128))])]),e("div",je,[Ge,e("div",Be,[r(e("input",{type:"text",class:"form-control",placeholder:"請輸入特色","onUpdate:modelValue":s[13]||(s[13]=o=>t.newFeature=o),onKeyup:s[14]||(s[14]=V((...o)=>d.addFeature&&d.addFeature(...o),["enter"])),disabled:t.isInputEnabled},null,40,qe),[[a,t.newFeature]]),e("button",{class:"btn btn-gray text-white",type:"button",onClick:s[15]||(s[15]=(...o)=>d.addFeature&&d.addFeature(...o))},"新增")]),e("div",Ke,[(i(!0),c(h,null,g(t.selectedProduct.features,(o,n)=>(i(),c("span",{class:"badge bg-info-light text-black d-flex align-items-center",key:n},[e("span",null,u(o),1),e("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:m=>d.removeFeature(n),style:{scale:"0.75"}},null,8,He)]))),128))])])]),e("div",ze,[e("div",Je,[Qe,r(e("select",{"onUpdate:modelValue":s[16]||(s[16]=o=>t.selectedProduct.category=o),disabled:t.isInputEnabled,class:"form-select","aria-label":"category",id:"category",name:"category"},Ye,8,We),[[F,t.selectedProduct.category]])]),e("div",Ze,[$e,r(e("input",{"onUpdate:modelValue":s[17]||(s[17]=o=>t.selectedProduct.target_units=o),disabled:t.isInputEnabled,type:"number",min:"0",class:"form-control",id:"target_units",placeholder:"請輸入目標組數"},null,8,et),[[a,t.selectedProduct.target_units,void 0,{number:!0}]])]),e("div",tt,[st,r(e("input",{"onUpdate:modelValue":s[18]||(s[18]=o=>t.selectedProduct.unit=o),disabled:t.isInputEnabled,type:"text",class:"form-control",id:"unit",placeholder:"請輸入單位"},null,8,ot),[[a,t.selectedProduct.unit]])])]),lt,e("div",dt,[e("div",nt,[it,r(e("input",{"onUpdate:modelValue":s[19]||(s[19]=o=>t.selectedProduct.question=o),disabled:t.isInputEnabled,type:"text",class:"form-control",id:"content_question",placeholder:"請輸入困擾標題"},null,8,ct),[[a,t.selectedProduct.question]])])]),e("div",rt,[e("div",at,[ut,r(e("input",{type:"text",class:"form-control",placeholder:"請輸入特點","onUpdate:modelValue":s[20]||(s[20]=o=>t.newPoint.title=o),disabled:t.isInputEnabled},null,8,pt),[[a,t.newPoint.title]])]),e("div",bt,[_t,r(e("textarea",{"onUpdate:modelValue":s[21]||(s[21]=o=>t.newPoint.content=o),disabled:t.isInputEnabled,class:"form-control",placeholder:"請輸入內容",id:"point-content",rows:"1"},null,8,mt),[[a,t.newPoint.content]])])]),e("div",ht,[e("div",gt,[ft,r(e("input",{"onUpdate:modelValue":s[22]||(s[22]=o=>t.newPoint.imageUrl=o),disabled:t.isInputEnabled,type:"url",class:"form-control",id:"point-imgUrl",placeholder:"請輸入網址"},null,8,Pt),[[a,t.newPoint.imageUrl]])]),e("div",vt,[e("img",{src:t.newPoint.imageUrl,class:"img-fluid"},null,8,wt)]),e("div",yt,[e("button",{class:"btn btn-gray text-white",type:"button",onClick:s[23]||(s[23]=(...o)=>d.addPoint&&d.addPoint(...o))},"新增")])]),e("div",kt,[e("div",Ut,[(i(!0),c(h,null,g(t.selectedProduct.points,(o,n)=>(i(),c("div",{key:n,class:"d-flex justify-content-between border border-gray border-1 rounded-2 p-2 mb-4"},[e("div",Ct,[e("div",xt,[e("div",Et,u(o.title)+" : "+u(o.content),1),e("div",Mt,u(o.imageUrl),1)]),e("div",It,[e("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:m=>d.removePoint(n),style:{scale:"0.75"}},null,8,Vt)])])]))),128))])]),Nt,e("div",Tt,[e("div",Dt,[Lt,r(e("input",{"onUpdate:modelValue":s[24]||(s[24]=o=>t.selectedProduct.origin_price=o),disabled:t.isInputEnabled,type:"number",min:"0",class:"form-control",id:"original-price",placeholder:"請輸入售價"},null,8,Ft),[[a,t.selectedProduct.origin_price,void 0,{number:!0}]])]),e("div",At,[Ot,r(e("input",{onKeyup:s[25]||(s[25]=(...o)=>d.calculatePrice&&d.calculatePrice(...o)),"onUpdate:modelValue":s[26]||(s[26]=o=>t.selectedProduct.discount=o),disabled:t.isInputEnabled,type:"number",min:"0",class:"form-control",id:"discount",placeholder:"請輸入折扣"},null,40,St),[[a,t.selectedProduct.discount,void 0,{number:!0}]])]),e("div",Rt,[jt,r(e("input",{"onUpdate:modelValue":s[27]||(s[27]=o=>t.selectedProduct.price=o),disabled:"",type:"number",class:"form-control",id:"original-price"},null,512),[[a,t.selectedProduct.price,void 0,{number:!0}]])])]),e("div",Gt,[e("div",Bt,[qt,r(e("input",{type:"text",class:"form-control",placeholder:"請輸入名稱","onUpdate:modelValue":s[28]||(s[28]=o=>t.newPackage.name=o),disabled:t.isInputEnabled},null,8,Kt),[[a,t.newPackage.name]])]),e("div",Ht,[zt,r(e("input",{type:"number",min:"0",class:"form-control",placeholder:"請輸入組數","onUpdate:modelValue":s[29]||(s[29]=o=>t.newPackage.units=o),disabled:t.isInputEnabled},null,8,Jt),[[a,t.newPackage.units,void 0,{number:!0}]])]),e("div",Qt,[e("button",{class:"btn btn-gray text-white",type:"button",onClick:s[30]||(s[30]=(...o)=>d.addPackage&&d.addPackage(...o))},"新增")])]),e("div",Wt,[e("div",Xt,[e("div",Yt,[(i(!0),c(h,null,g(t.selectedProduct.packages,(o,n)=>(i(),c("div",{key:o.name,class:"d-flex justify-content-between"},[e("div",Zt,u(o.name)+"，內含 "+u(o.units)+" 個 ",1),e("div",$t,[e("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:m=>d.removePoint(n),style:{scale:"0.75"}},null,8,es)])]))),128))])]),ts]),e("div",ss,[e("div",os,[ls,e("div",ds,[r(e("input",{type:"text",class:"form-control",placeholder:"請輸入內容物","onUpdate:modelValue":s[31]||(s[31]=o=>t.newContent=o),disabled:t.isInputEnabled},null,8,ns),[[a,t.newContent]]),e("button",{class:"btn btn-gray text-white",type:"button",onClick:s[32]||(s[32]=(...o)=>d.addContent&&d.addContent(...o))},"新增")])]),e("div",is,[cs,e("div",rs,[r(e("input",{type:"text",class:"form-control",placeholder:"請輸入備註","onUpdate:modelValue":s[33]||(s[33]=o=>t.newNote=o),disabled:t.isInputEnabled},null,8,as),[[a,t.newNote]]),e("button",{class:"btn btn-gray text-white",type:"button",onClick:s[34]||(s[34]=(...o)=>d.addNote&&d.addNote(...o))},"新增")])])]),e("div",us,[e("div",ps,[e("div",bs,[(i(!0),c(h,null,g(t.selectedProduct.contents,(o,n)=>(i(),c("div",{key:n,class:"d-flex justify-content-between"},[e("div",_s,u(o),1),e("div",ms,[e("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:m=>d.removeContent(n),style:{scale:"0.75"}},null,8,hs)])]))),128))])]),e("div",gs,[e("div",fs,[(i(!0),c(h,null,g(t.selectedProduct.notes,(o,n)=>(i(),c("div",{key:n,class:"d-flex justify-content-between"},[e("div",Ps,u(o),1),e("div",vs,[e("button",{type:"button",class:"btn-close","aria-label":"Close",onClick:m=>d.removeNote(n),style:{scale:"0.75"}},null,8,ws)])]))),128))])])]),ys,e("div",ks,[e("div",Us,[Cs,e("span",xs,u(t.selectedProduct.productRatings)+" 分 ",1),r(e("input",{"onUpdate:modelValue":s[35]||(s[35]=o=>t.selectedProduct.productRatings=o),disabled:t.isInputEnabled,type:"range",class:"form-range",min:"0",max:"5",step:"1"},null,8,Es),[[a,t.selectedProduct.productRatings]])]),e("div",Ms,[e("div",Is,[Vs,e("label",Ns,[r(e("input",{"onUpdate:modelValue":s[36]||(s[36]=o=>t.selectedProduct.is_enabled=o),disabled:t.isInputEnabled,type:"checkbox"},null,8,Ts),[[A,t.selectedProduct.is_enabled]]),Ds])])])])])])])]),e("div",Ls,[e("button",{onClick:s[37]||(s[37]=(...o)=>d.cancelUpdate&&d.cancelUpdate(...o)),type:"button",class:"btn btn-danger text-white","data-bs-dismiss":"modal"}," 取消 "),e("button",{onClick:s[38]||(s[38]=o=>l.updateProduct(this.isNew,this.selectedProduct)),type:"button",class:"btn btn-primary"}," 確認 ")])])])],512)}const As=E(B,[["render",Fs]]),Os={props:{tempProduct:Object},mixins:[M],data(){return{selectedProduct:{}}},created(){this.selectedProduct={...this.tempProduct}},computed:{...C(f,["isDelModalOpen"])},watch:{tempProduct:{deep:!0,handler(l){this.selectedProduct=l}},isDelModalOpen:{handler(l){l||this.hideModal()}}},methods:{...x(f,["deleteProduct"])}},Ss={class:"modal fade modal-lg",tabindex:"-1","aria-labelledby":"delModalLabel","aria-hidden":"true",ref:"modal"},Rs={class:"modal-dialog modal-dialog-centered"},js={class:"modal-content"},Gs=e("div",{class:"modal-header"},[e("h5",{class:"modal-title",id:"delModalLabel"},"刪除商品"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),Bs={class:"modal-body"},qs={class:"container-fluid"},Ks={class:"row"},Hs={class:"col-sm-8"},zs={class:"fw-bold text-danger"},Js={class:"badge bg-dark ms-2"},Qs={class:"text-muted"},Ws={class:"col-sm-4"},Xs=["src"],Ys={class:"modal-footer"},Zs=e("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function $s(l,s,p,_,t,d){return i(),c("div",Ss,[e("div",Rs,[e("div",js,[Gs,e("div",Bs,[e("div",qs,[e("div",Ks,[e("div",Hs,[e("h5",zs,[S(u(p.tempProduct.title)+" ",1),e("span",Js,u(p.tempProduct.category),1)]),e("p",null,u(p.tempProduct.description),1),e("p",null,[e("small",Qs," 原價: "+u(p.tempProduct.origin_price)+" / 售價: "+u(p.tempProduct.price),1)])]),e("div",Ws,[e("img",{src:p.tempProduct.imageUrl,class:"img-fluid"},null,8,Xs)])])])]),e("div",Ys,[Zs,e("button",{onClick:s[0]||(s[0]=o=>l.deleteProduct(this.selectedProduct.id)),type:"button",class:"btn btn-danger"}," 確認刪除 ")])])])],512)}const eo=E(Os,[["render",$s]]),to={components:{EditModal:As,DelModal:eo,PaginationGroup:R},data(){return{title:"這是商品頁面",isNew:!1,tempProductList:[],tempProduct:{productRatings:0,points:[],imagesUrl:[],tags:[],features:[],packages:[],contents:[],notes:[]}}},created(){this.tempProductList=[...this.productList]},watch:{productList:{deep:!0,handler(l){this.tempProductList=l}}},computed:{...C(f,["productList","pagination"])},mounted(){this.getProducts()},methods:{...x(f,["getProducts","postProduct"]),getPages(l){this.getProducts(l)},openModal(l,s){l==="new"?(this.tempProduct={productRatings:0,points:[],imagesUrl:[],tags:[],features:[],packages:[],contents:[],notes:[]},this.isNew=!0,this.$refs.editModal.openModal()):l==="edit"?(this.tempProduct={...s},Array.isArray(this.tempProduct.imagesUrl)||(this.tempProduct.imagesUrl=[]),this.isNew=!1,this.$refs.editModal.openModal()):l==="delete"&&(this.tempProduct={...s},this.$refs.delModal.openModal())}}},so={class:"container"},oo={class:"row py-2"},lo={class:"col mt-4 mb-4"},no={class:"container py-2"},io={class:"d-flex justify-content-between gap-2 py-2"},co={class:"p-2 mb-0"},ro={class:"d-flex justify-content-end gap-2"},ao={class:"container"},uo={class:"table table-hover"},po=e("thead",{class:"table-dark fw-bold"},[e("tr",null,[e("th",{scope:"col"},"商品主圖"),e("th",{scope:"col"},"商品名稱"),e("th",{scope:"col"},"分類"),e("th",{scope:"col"},"原價"),e("th",{scope:"col"},"售價"),e("th",{scope:"col"},"是否啟用"),e("th",{scope:"col"},"編輯")])],-1),bo=["src"],_o={key:0,class:"bi bi-check-circle-fill text-success",style:{scale:"150%"}},mo={key:1,class:"bi bi-x-circle-fill text-danger",style:{scale:"150%"}},ho={class:"btn-group",role:"group","aria-label":"Basic outlined example"},go=["onClick"],fo=["onClick"];function Po(l,s,p,_,t,d){const o=y("EditModal"),n=y("DelModal"),m=y("PaginationGroup");return i(),c("main",so,[e("div",oo,[e("div",lo,[e("div",no,[e("h2",null,u(t.title),1),e("div",io,[e("p",co,u(`一頁顯示 ${Object.keys(this.tempProductList).length} 項商品`),1),e("div",ro,[e("button",{onClick:s[0]||(s[0]=b=>d.openModal("new")),type:"button",class:"btn btn-primary",id:"modalBtn"}," 建立新的商品 ")]),k(o,{ref:"editModal",tempProduct:t.tempProduct,"is-new":t.isNew,onGetData:l.getProducts},null,8,["tempProduct","is-new","onGetData"]),k(n,{ref:"delModal",tempProduct:t.tempProduct,onGetData:l.getProducts},null,8,["tempProduct","onGetData"])])]),e("div",ao,[e("table",uo,[po,e("tbody",null,[(i(!0),c(h,null,g(t.tempProductList,b=>(i(),c("tr",{key:b.title},[e("td",null,[e("img",{src:b.imageUrl,class:"rounded",style:{height:"48px"}},null,8,bo)]),e("td",null,u(b.title),1),e("td",null,u(b.category),1),e("td",null,u(b.origin_price),1),e("td",null,u(b.price),1),e("td",null,[b.is_enabled?(i(),c("i",_o)):(i(),c("i",mo))]),e("td",null,[e("div",ho,[e("button",{onClick:T=>d.openModal("edit",b),type:"button",class:"btn btn-outline-primary btn-sm"}," 編輯 ",8,go),e("button",{onClick:T=>d.openModal("delete",b),type:"button",class:"btn btn-outline-danger btn-sm"}," 刪除 ",8,fo)])])]))),128))])])]),k(m,{pagination:l.pagination,onGetPages:d.getPages},null,8,["pagination","onGetPages"])])])])}const Uo=E(to,[["render",Po]]);export{Uo as default};
