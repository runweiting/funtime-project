import{G as v,u as g,v as c,L as d,_ as f,s as b,r as u,o as k,c as x,a as o,b as t,w as s,F as T,e as i}from"./index-M0oz9qzx.js";import{s as _}from"./showSuccessToast-0DvGP33G.js";import{s as L}from"./showErrorToast-4hI6Xoib.js";var $={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"runweiting",VITE_TEXT:"這是部屬完成的環境",BASE_URL:"/funtime-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const E=v.useLoading(),{VITE_APP_URL:m}=$,w=g("loginStore",{actions:{checkLogin(){const a=E.show(),e=`${m}/api/user/check`,l=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*=\s*([^;]*).*$)|^.*$/,"$1");l&&(c.defaults.headers.common.Authorization=l),c.post(e).then(()=>{_("驗證成功")}).catch(r=>{L(r.response.data.message).then(()=>{d.push({name:"login"})})}).finally(()=>{a.hide()})},logout(){const a=`${m}/logout`;c.post(a).then(e=>{_(e.data.message).then(()=>{document.cookie="myToken=; expires=;",c.defaults.headers.common.Authorization=null,d.push({name:"home"})})})}}}),A={created(){this.checkLogin()},methods:{...b(w,["checkLogin","logout"])}},N={class:"navbar navbar-expand-lg navbar-dark bg-dark"},P={class:"container px-4"},S=o("a",{class:"navbar-brand mb-0",href:"index.html"},"UNIQLOLO",-1),V=o("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[o("span",{class:"navbar-toggler-icon"})],-1),R={class:"collapse navbar-collapse justify-content-end",id:"navbarNav"},y={class:"navbar-nav gap-2"},I={class:"nav-item"},B={class:"nav-item"},O={class:"nav-item"},U={class:"nav-item"},C={class:"nav-item"},D={class:"nav-item"};function j(a,e,l,r,z,F){const n=u("RouterLink"),h=u("router-view");return k(),x(T,null,[o("header",null,[o("nav",N,[o("div",P,[S,V,o("div",R,[o("ul",y,[o("li",I,[t(n,{to:{name:"admin/products"},class:"nav-link text-decoration-none"},{default:s(()=>[i("編輯商品")]),_:1})]),o("li",B,[t(n,{to:{name:"admin/orders"},class:"nav-link text-decoration-none"},{default:s(()=>[i("編輯訂單")]),_:1})]),o("li",O,[t(n,{to:{name:"admin/coupons"},class:"nav-link text-decoration-none"},{default:s(()=>[i("編輯優惠卷")]),_:1})]),o("li",U,[t(n,{to:{name:"admin/articles"},class:"nav-link text-decoration-none"},{default:s(()=>[i("編輯文章")]),_:1})]),o("li",C,[t(n,{to:{name:"home"},class:"nav-link text-decoration-none"},{default:s(()=>[i("回到前台")]),_:1})]),o("li",D,[o("button",{onClick:e[0]||(e[0]=(...p)=>a.logout&&a.logout(...p)),type:"button",class:"btn btn-warning"}," 登出 ")])])])])])]),o("main",null,[t(h)])],64)}const Q=f(A,[["render",j]]);export{Q as default};
