import{_ as v,o as n,c as r,t as h,u as L,v as N,m as g,x as q,y as R,a as t,F as V,z as C,s as y,A as $,B as P,r as b,b as m,e as T,C as D,D as z,E as B,d as f}from"./index-nIaOHvfA.js";import{u as w}from"./userProductsStore-HfPaBZ1G.js";import{l as A,c as I}from"./cartStore-3NqmFZXv.js";import{s as M}from"./showErrorToast-bJNqnV0F.js";import{C as H}from"./CartList-AaZLgfzs.js";import"./showSuccessToast-LuDJjneU.js";import"./couponsStore-_PJ1sv1A.js";let E=0;const j="webkit moz ms o".split(" ");let p,u;const G=typeof window>"u";if(G)p=function(){},u=function(){};else{p=window.requestAnimationFrame,u=window.cancelAnimationFrame;let s;for(let e=0;e<j.length&&!(p&&u);e++)s=j[e],p=p||window[s+"RequestAnimationFrame"],u=u||window[s+"CancelAnimationFrame"]||window[s+"CancelRequestAnimationFrame"];(!p||!u)&&(p=function(e){const a=new Date().getTime(),i=Math.max(0,16-(a-E)),l=window.setTimeout(()=>{e(a+i)},i);return E=a+i,l},u=function(e){window.clearTimeout(e)})}const U={props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:2017},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:0,validator(s){return s>=0}},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default(s,e,a,i){return a*(-Math.pow(2,-10*s/i)+1)*1024/1023+e}}},data(){return{localStartVal:this.startVal,displayValue:this.formatNumber(this.startVal),printVal:null,paused:!1,localDuration:this.duration,startTime:null,timestamp:null,remaining:null,rAF:null}},computed:{countDown(){return this.startVal>this.endVal}},watch:{startVal(){this.autoplay&&this.start()},endVal(){this.autoplay&&this.start()}},mounted(){this.autoplay&&this.start(),this.$emit("mountedCallback")},methods:{start(){this.localStartVal=this.startVal,this.startTime=null,this.localDuration=this.duration,this.paused=!1,this.rAF=p(this.count)},pauseResume(){this.paused?(this.resume(),this.paused=!1):(this.pause(),this.paused=!0)},pause(){u(this.rAF)},resume(){this.startTime=null,this.localDuration=+this.remaining,this.localStartVal=+this.printVal,p(this.count)},reset(){this.startTime=null,u(this.rAF),this.displayValue=this.formatNumber(this.startVal)},count(s){this.startTime||(this.startTime=s),this.timestamp=s;const e=s-this.startTime;this.remaining=this.localDuration-e,this.useEasing?this.countDown?this.printVal=this.localStartVal-this.easingFn(e,0,this.localStartVal-this.endVal,this.localDuration):this.printVal=this.easingFn(e,this.localStartVal,this.endVal-this.localStartVal,this.localDuration):this.countDown?this.printVal=this.localStartVal-(this.localStartVal-this.endVal)*(e/this.localDuration):this.printVal=this.localStartVal+(this.endVal-this.localStartVal)*(e/this.localDuration),this.countDown?this.printVal=this.printVal<this.endVal?this.endVal:this.printVal:this.printVal=this.printVal>this.endVal?this.endVal:this.printVal,this.displayValue=this.formatNumber(this.printVal),e<this.localDuration?this.rAF=p(this.count):this.$emit("callback")},isNumber(s){return!isNaN(parseFloat(s))},formatNumber(s){s=s.toFixed(this.decimals),s+="";const e=s.split(".");let a=e[0];const i=e.length>1?this.decimal+e[1]:"",l=/(\d+)(\d{3})/;if(this.separator&&!this.isNumber(this.separator))for(;l.test(a);)a=a.replace(l,"$1"+this.separator+"$2");return this.prefix+a+i+this.suffix}},destroyed(){u(this.rAF)}};function W(s,e,a,i,l,d){return n(),r("span",null,h(l.displayValue),1)}const x=v(U,[["render",W]]);function Y(s,e,a){return e in s?Object.defineProperty(s,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):s[e]=a,s}function O(s,e){var a=Object.keys(s);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(s);e&&(i=i.filter(function(l){return Object.getOwnPropertyDescriptor(s,l).enumerable})),a.push.apply(a,i)}return a}x.unmounted=x.destroyed,Reflect.deleteProperty(x,"destroyed");var X=function(s){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?O(Object(a),!0).forEach(function(i){Y(s,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(a)):O(Object(a)).forEach(function(i){Object.defineProperty(s,i,Object.getOwnPropertyDescriptor(a,i))})}return s}({name:"CountTo",emits:["callback","mountedCallback"]},x),J={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"runweiting",VITE_TEXT:"這是部屬完成的環境",BASE_URL:"/funtime-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:K,VITE_APP_PATH:Q}=J,S=L("categoryStore",{state:()=>({categoryList:[]}),actions:{getCategory(){const s=`${K}/api/${Q}/products/all`;N.get(s).then(e=>{const{products:a}=e.data,i=new Set(a.map(l=>l.category));this.categoryList=[...i]})}}}),Z={emits:["category-selected"],data(){return{currentCategory:""}},watch:{currentCategory(){this.$emit("category-selected",this.currentCategory,1)}},computed:{...g(S,["categoryList"])}},tt=t("option",{value:""},"全部",-1),st=["value"];function et(s,e,a,i,l,d){return n(),r("div",null,[q(t("select",{"onUpdate:modelValue":e[0]||(e[0]=o=>l.currentCategory=o),class:"form-select form-select-sm"},[tt,(n(!0),r(V,null,C(s.categoryList,o=>(n(),r("option",{key:o,value:o},h(o),9,st))),128))],512),[[R,l.currentCategory]])])}const at=v(Z,[["render",et]]),it={emits:["page-selected"],data(){return{currentCategory:null}},computed:{...g(w,["pagination"])},methods:{...y(w,["getProducts"]),selectedPage(s){console.log(s),this.$emit("page-selected",this.currentCategory,s)}}},ot={class:"px-2"},lt={"aria-label":"Page navigation example"},nt={class:"pagination"},rt=t("span",{"aria-hidden":"true"},"«",-1),ct=[rt],dt={key:0,class:"page-link"},pt=["onClick"],ut=t("span",{"aria-hidden":"true"},"»",-1),ht=[ut];function mt(s,e,a,i,l,d){return n(),r("div",ot,[t("nav",lt,[t("ul",nt,[t("li",{class:$([{disabled:s.pagination.current_page===1},"page-item"])},[t("a",{onClick:e[0]||(e[0]=P(o=>d.selectedPage(s.pagination.current_page-1),["prevent"])),class:"page-link",href:"#","aria-label":"Previous"},ct)],2),(n(!0),r(V,null,C(s.pagination.total_pages,(o,_)=>(n(),r("li",{key:_,class:$([{active:o===s.pagination.current_page},"page-item"])},[o===s.pagination.current_page?(n(),r("span",dt,h(o),1)):(n(),r("a",{key:1,onClick:P(c=>d.selectedPage(o),["prevent"]),class:"page-link",href:"#"},h(o),9,pt))],2))),128)),t("li",{class:$([{disabled:s.pagination.current_page===s.pagination.total_pages},"page-item"])},[t("a",{onClick:e[1]||(e[1]=P(o=>d.selectedPage(s.pagination.current_page+1),["prevent"])),class:"page-link",href:"#","aria-label":"Next"},ht)],2)])])])}const ft=v(it,[["render",mt]]);var _t={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"runweiting",VITE_TEXT:"這是部屬完成的環境",BASE_URL:"/funtime-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:gt,VITE_APP_PATH:bt}=_t,vt={components:{CategoryList:at,PaginationGroup:ft},data(){return{title:"商品列表",product:{}}},mounted(){this.getProducts(),this.getCategory()},computed:{...g(w,["productList"]),...g(S,["categoryList"]),...g(A,["loadingStatus"])},methods:{...y(w,["getProducts"]),...y(I,["addToCart"]),...y(S,["getCategory"]),handleCategoryChange(s){this.getProducts(s)},handlePageChange(s,e){this.getProducts(s,e)},async getProduct(s){const e=A();e.loadingStatus.getProduct=s;const a=`${gt}/api/${bt}/product/${s}`;this.$route.params.id=s;try{const i=await this.axios.get(a);this.product=i.data.product,e.loadingStatus.getProduct=""}catch(i){M(i.response.data.message)}finally{this.$router.push({name:"productInfo"})}}}},k=s=>(z("data-v-39ae476c"),s=s(),B(),s),yt={class:"col-8 mt-4 mb-4",ref:"productList"},xt={class:"container d-flex justify-content-between"},wt={class:"p-2 mb-0"},Vt={class:"container table-responsive"},$t={class:"table table-hover align-middle"},Pt={class:"table-secondary"},St={class:"align-middle fw-bold",style:{height:"48px"}},Ct={scope:"col",style:{width:"17%"}},kt=k(()=>t("th",{scope:"col",style:{width:"30%"}},"商品名稱",-1)),Tt=k(()=>t("th",{scope:"col",style:{width:"28%"}},"價格",-1)),Dt=k(()=>t("th",{scope:"col",style:{width:"25%"}},null,-1)),At=["src"],Et={key:0,class:"fs-5 fw-bold mb-0"},jt={key:1},Ot={class:"fs-6 fw-bold text-secondary"},Ft={class:"fs-5 fw-bold mb-0"},Lt={class:"d-flex flex-column gap-2"},Nt=["disabled","onClick"],qt={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},Rt=["onClick"],zt={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function Bt(s,e,a,i,l,d){const o=b("category-list"),_=b("pagination-group");return n(),r("div",yt,[t("div",xt,[t("h2",null,h(l.title),1),t("p",wt,h(`目前有 ${s.productList.length} 項商品`),1)]),t("div",Vt,[t("table",$t,[t("thead",Pt,[t("tr",St,[t("th",Ct,[m(o,{onCategorySelected:d.handleCategoryChange},null,8,["onCategorySelected"])]),kt,Tt,Dt])]),t("tbody",null,[(n(!0),r(V,null,C(s.productList,c=>(n(),r("tr",{key:c.title},[t("td",null,[t("img",{src:c.imageUrl,class:"rounded product-img"},null,8,At)]),t("td",null,h(c.title),1),t("td",null,[c.origin_price===c.price?(n(),r("p",Et,h(c.price)+"元 ",1)):(n(),r("div",jt,[t("del",Ot,"原價"+h(c.origin_price)+"元",1),t("p",Ft,"現在只要"+h(c.price)+"元",1)]))]),t("td",null,[t("div",Lt,[t("button",{disabled:c.id===this.loadingStatus.getProduct,onClick:F=>d.getProduct(c.id),type:"button",class:"btn btn-outline-secondary",id:"modalBtn"},[T(" 查看更多 "),c.id===this.loadingStatus.getProduct?(n(),r("span",qt)):D("",!0)],8,Nt),t("button",{onClick:F=>s.addToCart(c.id),type:"button",class:"btn btn-outline-danger"},[T(" 加入購物車 "),c.id===this.loadingStatus.updateQty?(n(),r("span",zt)):D("",!0)],8,Rt)])])]))),128))])]),m(_,{onPageSelected:d.handlePageChange},null,8,["onPageSelected"])])],512)}const It=v(vt,[["render",Bt],["__scopeId","data-v-39ae476c"]]),Mt={components:{ProductList:It,CartList:H,CountTo:X}},Ht=f('<div class="m-3 m-lg-6"><div class="container bg-primary rounded-5 p-5 p-md-10" data-aos="fade-up"><div class="row"><div class="col"><div class="d-flex flex-column justify-content-center align-items-center gap-5"><h2 class="fs-1 text-white fw-bold mb-0">企劃排名</h2><h5 class="text-white responsive-lh-ls text-normal mb-0"> 對喜歡的企劃按贊、留言，增加人氣，告訴我們你的想法，一起探索信仰的美好！ </h5></div></div></div></div></div>',1),Gt={class:"m-3 m-lg-6"},Ut={class:"container p-5 p-md-10","data-aos":"fade-up"},Wt={class:"row row-cols-1 row-cols-xl-2"},Yt={class:"col-xl-9"},Xt=f('<div class="row row-cols-1"><div class="col px-0 px-md-3 mb-3 mb-lg-6"><div class="d-flex align-items-baseline gap-2"><h2 class="d-none d-sm-block fw-bold mb-0">Ranking</h2><h4 class="fw-bold mb-0">企劃排名</h4></div></div></div>',1),Jt={class:"row row-cols-1 row-cols-md-2 row-cols-xl-3 gy-5 mb-5 mb-md-10 position-relative"},Kt={class:"col mb-md-0 px-0 px-md-3"},Qt={class:"card h-100 shadow-sm position-relative"},Zt=f('<a href="#" class="stretched-link"></a><button type="button" class="btn position-absolute p-0 hvr-pulse"><i class="bi bi-heart-fill fs-5"></i></button><div class="position-relative"><img src="https://images.unsplash.com/photo-1585084293063-45ae031e7df4?q=80&amp;w=500&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="card-img-top" alt="boardGame1"><span class="badge rounded-pill bg-white text-primary position-absolute z-index-8" style="bottom:16px;right:16px;"># 讀經工具</span></div>',3),ts={class:"card-body d-flex flex-column justify-content-between"},ss=t("h5",{class:"card-title fw-bold"},"《走入創世記》讀經進度結合地圖說故事",-1),es={class:"row gx-0"},as=t("div",{class:"col-4"},[t("div",{class:"h-100 pt-4"},[t("small",{class:"fst-italic text-gray-dark"},"累計")])],-1),is={class:"col-8"},os={class:"d-flex justify-content-end align-items-baseline gap-2"},ls=t("div",{class:"d-flex align-items-center gap-2"},[t("small",{class:"fst-italic fw-bold"},"個"),t("i",{class:"bi bi-heart-fill text-primary"})],-1),ns={class:"col mb-md-0 px-0 px-md-3"},rs={class:"card h-100 shadow-sm position-relative"},cs=f('<a href="#" class="stretched-link"></a><button type="button" class="btn position-absolute p-0 hvr-pulse"><i class="bi bi-heart-fill fs-5"></i></button><div class="position-relative"><img src="https://images.unsplash.com/photo-1585084293063-45ae031e7df4?q=80&amp;w=500&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="card-img-top" alt="boardGame1"><span class="badge rounded-pill bg-white text-primary position-absolute z-index-8" style="bottom:16px;right:16px;"># 讀經工具</span></div>',3),ds={class:"card-body d-flex flex-column justify-content-between"},ps=t("h5",{class:"card-title fw-bold"},"《365萬用貼紙卡片》將美好經句貼在任何地方",-1),us={class:"row gx-0"},hs=t("div",{class:"col-4"},[t("div",{class:"h-100 pt-4"},[t("small",{class:"fst-italic text-muted"},"累計")])],-1),ms={class:"col-8"},fs={class:"d-flex justify-content-end align-items-baseline gap-2"},_s=t("div",{class:"d-flex align-items-center gap-2"},[t("small",{class:"fst-italic fw-bold"},"個"),t("i",{class:"bi bi-heart-fill text-primary"})],-1),gs={class:"col mb-md-0 px-0 px-md-3"},bs={class:"card h-100 shadow-sm position-relative"},vs=f('<a href="#" class="stretched-link"></a><button type="button" class="btn position-absolute p-0 hvr-pulse"><i class="bi bi-heart-fill fs-5"></i></button><div class="position-relative"><img src="https://images.unsplash.com/photo-1585084293063-45ae031e7df4?q=80&amp;w=500&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="card-img-top" alt="boardGame1"><span class="badge rounded-pill bg-white text-primary position-absolute z-index-8" style="bottom:16px;right:16px;"># 讀經工具</span></div>',3),ys={class:"card-body d-flex flex-column justify-content-between"},xs=t("h5",{class:"card-title fw-bold"},"《#followJesus追蹤刺繡貼》你生命中的 #是什麼？",-1),ws={class:"row gx-0"},Vs=t("div",{class:"col-4"},[t("div",{class:"h-100 pt-4"},[t("small",{class:"fst-italic text-muted"},"累計")])],-1),$s={class:"col-8"},Ps={class:"d-flex justify-content-end align-items-baseline gap-2"},Ss=t("div",{class:"d-flex align-items-center gap-2"},[t("small",{class:"fst-italic fw-bold"},"個"),t("i",{class:"bi bi-heart-fill text-primary"})],-1),Cs=t("div",{class:"col bg-secondary rounded-5 position-absolute z-index-n1 d-none d-md-block",style:{width:"100%",height:"40px",bottom:"-20px"}},null,-1),ks=f('<div class="col-xl-3"><div class="row row-cols-1"><div class="col px-0 px-md-3 mb-3 mb-lg-6"><div class="d-flex align-items-baseline gap-2"><h2 class="d-none d-sm-block fw-bold mb-0">Category</h2><h4 class="fw-bold mb-0">熱門標籤</h4></div></div></div><div class="row row-cols-1"><div class="col px-0 px-md-3"><div class="bg-light rounded-5 p-5"><ol class="row row-cols-1 list-unstyled gy-2 mb-0"><li class="col-md-6 col-xl-12"><div class="row align-items-center"><div class="col-3 px-0 d-flex justify-content-end align-items-center gap-2 pe-1"><div class="bg-white border rounded-circle border-3 border-black position-relative" style="width:35px;height:35px;"><span class="text-black position-absolute top-50 start-50 translate-middle z-index-10" style="font-size:18px;">1</span></div><span class="text-black" style="font-size:18px;">#</span></div><div class="col-9 px-0"><span class="text-black text-wrap" style="font-size:18px;">總是讀不完創世記呀～</span></div></div></li><li class="col-md-6 col-xl-12"><div class="row align-items-center"><div class="col-3 px-0 d-flex justify-content-end align-items-center gap-2 pe-1"><div class="bg-white border rounded-circle border-3 border-black position-relative" style="width:35px;height:35px;"><span class="text-black position-absolute top-50 start-50 translate-middle z-index-10" style="font-size:18px;">1</span></div><span class="text-black" style="font-size:18px;">#</span></div><div class="col-9 px-0"><span class="text-black text-wrap" style="font-size:18px;">總是讀不完創世記呀～</span></div></div></li></ol></div></div></div></div>',1),Ts={class:"container"},Ds=t("h1",{class:"pt-5 text-center"},"商品列表",-1),As={class:"row py-2"};function Es(s,e,a,i,l,d){const o=b("count-to"),_=b("product-list"),c=b("cart-list");return n(),r(V,null,[Ht,t("div",Gt,[t("div",Ut,[t("div",Wt,[t("div",Yt,[Xt,t("div",Jt,[t("div",Kt,[t("div",Qt,[Zt,t("div",ts,[ss,t("div",es,[as,t("div",is,[t("div",os,[m(o,{startVal:0,endVal:50,duration:5e3,ref:s.refset,class:"display-1 fst-italic fw-bold"},null,512),ls])])])])])]),t("div",ns,[t("div",rs,[cs,t("div",ds,[ps,t("div",us,[hs,t("div",ms,[t("div",fs,[m(o,{startVal:0,endVal:100,duration:5e3,ref:s.refset,class:"display-1 fst-italic fw-bold"},null,512),_s])])])])])]),t("div",gs,[t("div",bs,[vs,t("div",ys,[xs,t("div",ws,[Vs,t("div",$s,[t("div",Ps,[m(o,{startVal:0,endVal:30,duration:5e3,ref:s.refset,class:"display-1 fst-italic fw-bold"},null,512),Ss])])])])])]),Cs])]),ks])])]),t("main",Ts,[Ds,t("div",As,[m(_),m(c)])])],64)}const zs=v(Mt,[["render",Es]]);export{zs as default};
