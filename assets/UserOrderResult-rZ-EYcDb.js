import{_ as x,m as v,a as w,r as h,o as r,c as d,d as g,b as t,F as c,x as u,t as s,A as i,g as y}from"./index-TFW6QGXf.js";import{u as b}from"./userOrderStore-K1Ff7jc_.js";import{O as S}from"./OrderHeader-T3wX1d7K.js";import{O as T}from"./OrderSteps-Wl066b0C.js";import{t as E}from"./timestampToDate-lwWXufjj.js";import"./showSuccessToast-TNVcc7d0.js";import"./showErrorToast-H8uiVGa1.js";import"./userCartStore-PRqeQ4jA.js";import"./userProductsStore-5on-Fguo.js";import"./FundraisingSteps-kFJhwpbj.js";const C={components:{OrderHeader:S,OrderSteps:T},data(){return{currentOrderSteps:3,currentFundraisingSteps:1,tempProductId:""}},mounted(){const{id:e}=this.$route.params;this.tempProductId=e,this.calculateQty()},computed:{...v(b,["tempOrder","tempOrderId","productQtyMap"])},methods:{...w(b,["calculateQty"]),formatDate(e){const{formattedDate:l,formattedTime:_}=E(e);return{formattedDate:l,formattedTime:_}},goToHome(){this.$router.push({name:"home"})},goToPayment(){this.currentOrderSteps=1,this.$router.push({name:"payment",params:{id:this.tempProductId}})}}},F={class:"mx-3 mx-lg-10"},N={class:"container px-lg-12 py-3 py-lg-6"},P={class:"row row-cols-1"},D={class:"col-md-6 col-lg-5 px-xl-4"},j=["src"],H={class:"text-dark-gray fw-normal mb-0"},I={class:"d-flex justify-content-between"},Q={class:"mb-0"},V={class:"d-flex gap-2"},B={class:"fs-5 fw-bold mb-0"},M={class:"badge bg-info-light text-black"},A={class:"text-dark-gray d-block mb-1"},U={class:"d-flex"},q={key:0,class:"badge text-dark-gray fw-normal me-2",style:{"background-color":"#E9ECEF"}},L=t("span",{class:"badge text-dark-gray fw-normal",style:{"background-color":"#E9ECEF"}},"目標達成 3 個月內出貨",-1),R=t("hr",{class:"w-100 border-top my-1",style:{border:"3px dotted #8C8C8E"}},null,-1),$=t("small",{class:"text-dark-gray"},"一組內含：",-1),z={class:"list-unstyled mb-0"},G=t("div",{class:"d-flex align-items-center gap-2"},[t("i",{class:"bi bi-check-circle-fill text-dark-secondary"}),t("small",null,"臺灣本島免運、可寄離島")],-1),J={class:"col-md-6 col-lg-7 px-xl-4 gy-3 gy-md-0"},K={class:"rounded-5 border border-5 border-light p-5 h-100 position-sticky top-0"},W={class:"row row-cols-1 gy-5"},X={class:"col px-8"},Y={class:"row row-cols-1 gy-6 row-cols-xxl-2 align-items-center mb-4"},Z={class:"col"},tt={class:"d-flex gap-1 text-dark-gray mb-2"},et=t("span",null,"時間",-1),st={key:0},ot={class:"d-flex gap-1 text-dark-gray"},rt=t("span",{class:"text-nowrap"},"編號",-1),dt={class:"col"},lt={key:0,class:"d-flex justify-content-start justify-content-sm-center align-items-center gap-2 gap-lg-4 pt-4 pt-sm-0"},nt=t("i",{class:"bi bi-check-circle-fill text-dark-secondary fs-4"},null,-1),at=t("h4",{class:"mb-0"},"預購成功",-1),ct=[nt,at],it={class:"col px-xl-5"},mt={class:"d-flex flex-column justify-content-between"},pt={class:"rounded-5 border border-light border-3 p-4 mb-5"},ut=t("thead",null,[t("tr",null,[t("th",{scope:"col",colspan:"3",class:"fs-5"},"預購資訊")])],-1),_t={class:"align-middle"},ht=t("th",{scope:"row",style:{width:"22%"}},"金額",-1),gt={class:"fs-5 fw-bold"},yt={key:0,class:"d-flex gap-2 mt-1"},bt=t("i",{class:"bi bi-check-circle-fill text-dark-secondary"},null,-1),ft={class:"text-dark-gray"},Ot={class:"text-dark-gray"},kt=t("th",{scope:"row",style:{width:"22%"}},"明細",-1),xt={colspan:"2"},vt={class:"list-unstyled mb-0 text-dark-gray"},wt=t("th",{scope:"row",style:{width:"22%"}},"狀態",-1),St={colspan:"2"},Tt={class:"d-flex align-items-center gap-2"},Et={class:"text-end"};function Ct(e,l,_,Ft,a,n){const f=h("OrderHeader"),O=h("OrderSteps");return r(),d(c,null,[g(f,{currentFundraisingSteps:a.currentFundraisingSteps},null,8,["currentFundraisingSteps"]),g(O,{currentOrderSteps:a.currentOrderSteps},null,8,["currentOrderSteps"]),t("div",F,[t("div",N,[t("div",P,[t("div",D,[(r(!0),d(c,null,u(e.tempOrder.products,(o,m)=>(r(),d("div",{key:m,class:"d-flex flex-column justify-content-between rounded-5 border border-5 border-light p-5 gap-3 position-relative mb-3"},[t("img",{src:o.product.imageUrl,alt:"product-image",class:"card-img-top object-fit-cover img-fluid rounded",style:{"max-height":"200px"}},null,8,j),t("h6",H,s(o.product.short_title),1),t("div",I,[t("h5",Q,s(o.qty)+" 入組",1),t("div",V,[t("h6",B,"NT$ "+s(e.tempOrder.total),1),t("span",M,s(o.product.discount*100)+"折",1)])]),t("div",null,[t("small",A,[y("預定售價 "),t("del",null,"NT$ "+s(o.product.origin_price),1),y("，折扣後 NT$ "+s(o.product.origin_price*o.product.discount),1)]),t("div",U,[e.productQtyMap[a.tempProductId]?(r(),d("span",q,"預購人數 "+s(e.productQtyMap[a.tempProductId].orderQty)+" 次",1)):i("",!0),L])]),R,t("div",null,[$,t("ul",z,[(r(!0),d(c,null,u(o.product.contents,(p,k)=>(r(),d("li",{key:k},s(p),1))),128))])]),G]))),128))]),t("div",J,[t("div",K,[t("div",W,[t("div",X,[t("div",Y,[t("div",Z,[t("div",tt,[et,e.tempOrder.create_at?(r(),d("span",st,s(n.formatDate(e.tempOrder.create_at).formattedDate)+" "+s(n.formatDate(e.tempOrder.create_at).formattedTime),1)):i("",!0)]),t("div",ot,[rt,t("span",null,s(e.tempOrder.id),1)])]),t("div",dt,[e.tempOrder.id?(r(),d("div",lt,ct)):i("",!0)])])]),t("div",it,[t("div",mt,[t("div",pt,[(r(!0),d(c,null,u(e.tempOrder.products,(o,m)=>(r(),d("table",{key:m,class:"table table-border mb-0"},[ut,t("tbody",_t,[t("tr",null,[ht,t("td",null,[t("span",gt,"NT$ "+s(o.final_total)+"元",1),o.coupon?(r(),d("div",yt,[bt,t("span",ft,"已使用優惠卷："+s(o.coupon.code),1),t("span",Ot,s(o.coupon.title),1)])):i("",!0)])]),t("tr",null,[kt,t("td",xt,[t("ul",vt,[t("li",null,"姓名："+s(e.tempOrder.user.name),1),t("li",null,"手機："+s(e.tempOrder.user.tel),1),t("li",null,"Email："+s(e.tempOrder.user.email),1),t("li",null,"運送："+s(e.tempOrder.user.shipment),1),t("li",null,"地址："+s(e.tempOrder.user.postcode)+s(e.tempOrder.user.country)+s(e.tempOrder.user.city)+s(e.tempOrder.user.region)+s(e.tempOrder.user.address),1),t("li",null,"備註："+s(e.tempOrder.user.message),1)])])]),t("tr",null,[wt,t("td",St,[t("div",Tt,[t("button",{onClick:l[0]||(l[0]=(...p)=>n.goToPayment&&n.goToPayment(...p)),class:"btn btn-primary-light text-white",type:"button"},"前往付款")])])])])]))),128))]),t("div",Et,[t("button",{onClick:l[1]||(l[1]=(...o)=>n.goToHome&&n.goToHome(...o)),type:"button",class:"btn btn-primary text-white"},"前往首頁")])])])])])])])])])],64)}const At=x(C,[["render",Ct]]);export{At as default};
