import{C as p,B as L,D as e}from"./index-8_2dSobz.js";import{s as a}from"./showErrorToast-RmEj-76d.js";var h={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"runweiting",BASE_URL:"/funtime-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const P=p.useLoading({}),{VITE_APP_URL:c,VITE_APP_PATH:d}=h,_=L("userProductsStore",{state:()=>({productList:[],pagination:{},product:{},isLikedList:{}}),actions:{async getProducts(t,s=1){const o=P.show();let r=`${c}/api/${d}/products?page=${s}`;t&&(r+=`&category=${t}`);try{const i=await e.get(r),{products:u,pagination:n}=i.data;this.productList=u,this.pagination=n,this.sortProducts(),this.isLikedList()}catch(i){console.log(i),a(i.response)}finally{o.hide()}},sortProducts(){this.productList=this.productList.sort((t,s)=>t.price-s.price)},isLikedList(){const t=this.productList.reduce((s,o)=>(s[o.id]={isLiked:!1},s),{});this.isLikedList=t},async getProduct(t){const s=`${c}/api/${d}/product/${t}`;try{const o=await e.get(s);this.product=o.data.product}catch(o){a(o.response.data.message)}}}});export{_ as u};
