import{_ as k,o as c,c as d,t as p,m as F,a as N,r as w,b as a,F as f,x,f as D,d as g,y as O}from"./index-DW-YAaVl.js";import{u as _}from"./userLikesStore-8bfPxzVn.js";import"./showSuccessToast-4Q0mJWPL.js";import"./userProductsStore-ag1QJfWQ.js";import"./showErrorToast-3Rr6__rM.js";let y=0;const V="webkit moz ms o".split(" ");let r,n;const j=typeof window>"u";if(j)r=function(){},n=function(){};else{r=window.requestAnimationFrame,n=window.cancelAnimationFrame;let e;for(let t=0;t<V.length&&!(r&&n);t++)e=V[t],r=r||window[e+"RequestAnimationFrame"],n=n||window[e+"CancelAnimationFrame"]||window[e+"CancelRequestAnimationFrame"];(!r||!n)&&(r=function(t){const i=new Date().getTime(),s=Math.max(0,16-(i-y)),l=window.setTimeout(()=>{t(i+s)},s);return y=i+s,l},n=function(t){window.clearTimeout(t)})}const q={props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:2017},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:0,validator(e){return e>=0}},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default(e,t,i,s){return i*(-Math.pow(2,-10*e/s)+1)*1024/1023+t}}},data(){return{localStartVal:this.startVal,displayValue:this.formatNumber(this.startVal),printVal:null,paused:!1,localDuration:this.duration,startTime:null,timestamp:null,remaining:null,rAF:null}},computed:{countDown(){return this.startVal>this.endVal}},watch:{startVal(){this.autoplay&&this.start()},endVal(){this.autoplay&&this.start()}},mounted(){this.autoplay&&this.start(),this.$emit("mountedCallback")},methods:{start(){this.localStartVal=this.startVal,this.startTime=null,this.localDuration=this.duration,this.paused=!1,this.rAF=r(this.count)},pauseResume(){this.paused?(this.resume(),this.paused=!1):(this.pause(),this.paused=!0)},pause(){n(this.rAF)},resume(){this.startTime=null,this.localDuration=+this.remaining,this.localStartVal=+this.printVal,r(this.count)},reset(){this.startTime=null,n(this.rAF),this.displayValue=this.formatNumber(this.startVal)},count(e){this.startTime||(this.startTime=e),this.timestamp=e;const t=e-this.startTime;this.remaining=this.localDuration-t,this.useEasing?this.countDown?this.printVal=this.localStartVal-this.easingFn(t,0,this.localStartVal-this.endVal,this.localDuration):this.printVal=this.easingFn(t,this.localStartVal,this.endVal-this.localStartVal,this.localDuration):this.countDown?this.printVal=this.localStartVal-(this.localStartVal-this.endVal)*(t/this.localDuration):this.printVal=this.localStartVal+(this.endVal-this.localStartVal)*(t/this.localDuration),this.countDown?this.printVal=this.printVal<this.endVal?this.endVal:this.printVal:this.printVal=this.printVal>this.endVal?this.endVal:this.printVal,this.displayValue=this.formatNumber(this.printVal),t<this.localDuration?this.rAF=r(this.count):this.$emit("callback")},isNumber(e){return!isNaN(parseFloat(e))},formatNumber(e){e=e.toFixed(this.decimals),e+="";const t=e.split(".");let i=t[0];const s=t.length>1?this.decimal+t[1]:"",l=/(\d+)(\d{3})/;if(this.separator&&!this.isNumber(this.separator))for(;l.test(i);)i=i.replace(l,"$1"+this.separator+"$2");return this.prefix+i+s+this.suffix}},destroyed(){n(this.rAF)}};function M(e,t,i,s,l,h){return c(),d("span",null,p(l.displayValue),1)}const u=k(q,[["render",M]]);function P(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function v(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(l){return Object.getOwnPropertyDescriptor(e,l).enumerable})),i.push.apply(i,s)}return i}u.unmounted=u.destroyed,Reflect.deleteProperty(u,"destroyed");var H=function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?v(Object(i),!0).forEach(function(s){P(e,s,i[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(i,s))})}return e}({name:"CountTo",emits:["callback","mountedCallback"]},u);const B={components:{CountTo:H},data(){return{countStart:0,productList:[{id:"-NtQQq9wfaS5gnxAmQnA",imageUrl:"https://plus.unsplash.com/premium_photo-1664301485771-f8896c87af2c?q=80&w=450&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",title:"《走入創世記》",tags:["讀經工具","小組團契"],likes:125},{id:"-NtcB4bysPThWL4yjgxt",imageUrl:"https://images.unsplash.com/photo-1606503153255-59d8b8b82176?q=80&w=450&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",title:"《舊約先知扮演卡牌》",tags:["小組團契","讀經工具"],likes:100},{id:"-Ntc-QorK-mrPy8vzmso",imageUrl:"https://images.unsplash.com/photo-1532565820562-c32d7f053221?q=80&w=450&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",title:"《旅行筆記本套裝》",tags:["小組團契","讀經工具"],likes:50},{id:"-Ntc81uuLPdzCGCLN5hL",imageUrl:"https://images.unsplash.com/photo-1549737221-bef65e2604a6?q=80&w=450&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",title:"《新約手繪插畫本》",tags:["兒童讀物","聖經插畫"],likes:25},{id:"-NtQXlJuHbF2jQ4sPyBW",imageUrl:"https://images.unsplash.com/photo-1563941406054-949225931d52?q=80&w=450&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",title:"《歷史聖經地圖探索》",tags:["家庭遊戲","歷史地理"],likes:10},{id:"-Ntc9fEUPO1wGOKMaHm6",imageUrl:"https://images.unsplash.com/photo-1577896849786-738ed6c78bd3?q=80&w=450&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",title:"《聖地旅遊指南》",tags:["桌上遊戲","小組團契"],likes:2}],productRank:[]}},mounted(){this.getProductRank(),this.initPreferenceState()},computed:{...F(_,["preferenceState"])},methods:{...N(_,["initPreferenceState","addToCollection","removeCollection"]),getProductRank(){const i=this.productList.map(s=>({id:s.id,likes:s.likes})).sort((s,l)=>l.likes-s.likes).reduce((s,l,h)=>(s[l.id]={likes:l.likes,rank:h+1},s),{});this.productRank=i},getRankClass(e){var i;const t=(i=this.productRank[e])==null?void 0:i.rank;return t?`bi-${t}-circle-fill`:""},handleCollection(e,t){this.preferenceState[t].isLiked===!1?this.addToCollection(e):this.preferenceState[t].isLiked===!0&&this.removeCollection(t)}}},T=D('<div class="m-3 m-lg-6"><div class="container bg-primary rounded-5 p-5 p-md-10" data-aos="fade-up"><div class="row"><div class="col"><div class="d-flex flex-column justify-content-center align-items-center gap-5"><h2 class="fs-1 text-white fw-bold mb-0">企劃排名</h2><h5 class="text-white responsive-lh-ls text-normal mb-0"> 對喜歡的企劃按贊、留言，增加人氣，告訴我們你的想法，一起探索信仰的美好！ </h5></div></div></div></div></div>',1),L={class:"m-3 m-lg-6"},G={class:"container p-5 p-md-10"},R={class:"row"},$={class:"col"},U=D('<div class="row row-cols-1"><div class="col px-0 px-md-3 mb-3 mb-lg-6"><div class="d-flex align-items-baseline gap-2"><h2 class="d-none d-sm-block fw-bold mb-0">Ranking</h2><h4 class="fw-bold mb-0">企劃排名</h4></div></div></div>',1),W={class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 gy-5 position-relative"},E={class:"card h-100 shadow hvr-grow",style:{cursor:"pointer"}},Q=["onClick"],Y={key:0,class:"bi fs-5 bi-heart text-white"},z={key:1,class:"bi fs-5 bi-heart-fill text-danger"},K={class:"d-flex justify-content-center align-items-center position-absolute",style:{top:"16px",left:"16px",width:"50px",height:"50px"}},J=a("div",{class:"rounded-circle hvr-ranking",style:{width:"100%",height:"100%",border:"2px dotted white"}},null,-1),X=["src","alt"],Z={class:"card-body d-flex flex-column justify-content-between"},I={class:"card-title fw-bold"},tt={class:"row gx-0 mb-2"},et=a("div",{class:"col-4"},[a("div",{class:"h-100 pt-4"},[a("small",{class:"fst-italic text-gray-dark"},"累計")])],-1),it={class:"col-8"},st={class:"d-flex justify-content-end align-items-baseline gap-2"},at=a("div",{class:"d-flex align-items-center gap-2"},[a("small",{class:"fst-italic fw-bold"},"個"),a("i",{class:"bi bi-heart-fill text-danger"})],-1),lt={class:"d-flex justify-content-end gap-2"},ot={class:"badge rounded-pill bg-primary text-white",style:{right:"16px",bottom:"16px"}},rt=a("div",{class:"col bg-secondary rounded-5 position-absolute z-index-n1 d-none d-md-block",style:{bottom:"-20px",width:"100%",height:"40px"}},null,-1);function nt(e,t,i,s,l,h){const S=w("RouterLink"),A=w("count-to");return c(),d(f,null,[T,a("div",L,[a("div",G,[a("div",R,[a("div",$,[U,a("div",W,[(c(!0),d(f,null,x(l.productList,o=>{var m;return c(),d("div",{key:o.id,class:"col"},[a("div",E,[g(S,{to:`/product/${o.id}/content`,class:"stretched-link"},null,8,["to"]),a("button",{onClick:b=>h.handleCollection(o,o.id),type:"button",class:"btn btn-white position-absolute p-0 btn-likes hvr-pop"},[((m=e.preferenceState[o.id])==null?void 0:m.isLiked)===!1?(c(),d("i",Y)):(c(),d("i",z))],8,Q),a("div",K,[J,a("i",{class:O([h.getRankClass(o.id),"fs-1 text-white position-absolute bi"])},null,2)]),a("img",{src:o.imageUrl,alt:o.title+"商品主圖",class:"card-img-top object-fit-cover img-fluid",style:{"min-height":"150px"}},null,8,X),a("div",Z,[a("h5",I,p(o.title),1),a("div",tt,[et,a("div",it,[a("div",st,[g(A,{startVal:l.countStart,endVal:o.likes,duration:5e3,class:"display-3 fst-italic fw-bold"},null,8,["startVal","endVal"]),at])])]),a("div",lt,[(c(!0),d(f,null,x(o.tags,(b,C)=>(c(),d("div",{key:C},[a("span",ot,p(`# ${b}`),1)]))),128))])])])])}),128)),rt])])])])])],64)}const pt=k(B,[["render",nt]]);export{pt as default};
