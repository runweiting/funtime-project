import{_ as $,m as b,a as y,r as x,o as e,c as o,b as t,d as n,w as _,t as i,F as a,x as d,f as C,g as c,A as p,z as T}from"./index-8_2dSobz.js";import{u as v}from"./userProductsStore-87MYB2Ca.js";import{u as w}from"./userCartStore-_qhtbB7l.js";import{u as k}from"./userOrderStore-xe7S_CrE.js";import{s as M}from"./showErrorToast-RmEj-76d.js";import{s as S}from"./showWarningToast-o-HEZ4RD.js";import"./showSuccessToast-NlkLUFHd.js";const N={components:{},mounted(){const{id:s}=this.$route.params;this.getProduct(s),this.getOrders(),this.calculateQty()},computed:{...b(v,["product"]),...b(k,["productQtyMap"]),...b(w,["cartList"])},methods:{...y(v,["getProduct"]),...y(k,["getOrders","calculateQty"]),...y(w,["addToCart","getCart"]),async handleAddToCart(s,g){if(await this.getCart(),this.cartList.length>0){S("請一次預購一個企劃");const u=this.cartList[0];this.$router.push({name:"cart",params:{id:u.product.id,units:u.qty}});return}try{this.addToCart(s,g),await this.getCart(s),this.$router.push({name:"cart",params:{id:s,units:g}})}catch(u){M(u)}}}},V={class:"mx-3 mx-lg-10"},A={class:"container px-lg-12","data-aos":"fade-up"},B={class:"row align-items-center px-xl-4"},L={class:"col"},D={class:"d-flex gap-2 mb-2","aria-label":"breadcrumb"},F={class:"text-dark-gray"},P=t("small",{class:"text-dark-gray"},"/",-1),R={class:"text-dark-gray"},q={class:"fs-4 card-title fw-bold"},E={class:"row row-cols-1 py-2 p-xl-4 row-cols-xl-2"},H={class:"col-xl-7 px-xl-4"},O={class:"h-100 d-flex flex-column justify-content-between gap-4"},U=["src"],z={class:"d-flex flex-column flex-sm-row justify-content-sm-between gap-2 mb-2"},G={class:"d-flex gap-2"},W={class:"d-flex align-items-baseline gap-3"},Y=t("small",{class:"text-dark-gray"},"提案人",-1),J={class:"text-dark-gray"},K={class:"col-xl-5 px-xl-4"},X={class:"h-100 d-flex flex-column justify-content-between gap-2"},Z={class:"row row-cols-1 align-items-center align-items-md-end row-cols-xl-1 gy-2"},I={class:"col-md-5"},tt={class:"d-flex gap-8 align-items-center"},st={class:"fst-italic"},et={class:"text-dark-gray"},ot={key:0,class:"fw-bold mt-2 mb-0"},it={class:"fst-italic"},rt=t("small",{class:"text-dark-gray text-start"},"預購人數",-1),lt={key:0,class:"fw-bold mt-2 mb-0"},at={class:"col-md-7"},dt={key:0,class:"progress",style:{width:"85%"}},ct={key:1},nt={class:"fw-bold"},pt={class:"card-text mb-0 text-gray-dark"},ut={class:"d-flex flex-xl-row gap-4"},ht={key:0,class:"bi bi-lightning-fill text-primary"},_t={key:1,class:"bi bi-people-fill text-primary"},mt={key:2,class:"bi bi-flag-fill text-primary"},gt={class:"text-dark-gray"},ft=C('<div class="rounded-5 border border-5 border-light p-3"><div class="d-flex"><i class="bi bi-circle-fill text-primary" style="scale:40%;"></i><span class="fs-6 fw-bold fst-italic text-black text-center">登記享優惠資格，無需先付款。</span></div><div class="d-flex"><i class="bi bi-circle-fill text-primary" style="scale:40%;"></i><span class="fs-6 fw-bold fst-italic text-black text-center">歡迎試玩、分享，越早實現企劃。</span></div></div><div class="d-flex justify-content-end align-items-center gap-6"><button type="button" class="btn p-0 hvr-pop text-primary"><i class="bi bi-line fs-4"></i></button><button type="button" class="btn p-0 hvr-pop text-primary"><i class="bi bi-facebook fs-4"></i></button><button type="button" class="btn p-0 hvr-pop text-primary"><i class="bi bi-share-fill fs-4"></i></button><button type="button" class="btn p-0 hvr-pop text-primary"><i class="bi bi-heart-fill fs-4"></i></button></div>',2),bt={class:"mx-3 mx-lg-10"},yt={class:"container bg-light-gray rounded-5 px-6 py-3 px-lg-12 px-xl-15"},xt={class:"row row-cols-1 row-cols-lg-2 align-items-center"},vt={class:"col-lg-7"},wt={class:"list-unstyled d-flex gap-6 mb-0"},kt=t("div",{class:"col-lg-5 d-none d-lg-block"},[t("div",{class:"d-flex gap-4"})],-1),Ct=C('<div class="d-lg-none mx-3 mx-lg-10 fixed-bottom" style="bottom:12px;"><div class="container bg-white rounded-5 border border-light border-5 py-3 px-12"><div class="row align-items-center"><div class="col"><div class="d-flex gap-4"></div></div></div></div></div>',1),jt={class:"mx-3 mx-lg-10"},Qt={class:"container px-lg-12"},$t={class:"row row-cols-1 py-2 p-xl-4 pt-xl-8 row-cols-md-2"},Tt={class:"col-md-5 px-xl-4"},Mt={class:"d-flex flex-column justify-content-between rounded-5 border border-5 border-light p-5 my-5"},St={class:"d-flex gap-2"},Nt=t("div",{class:"rounded-circle overflow-hidden",style:{width:"50px",height:"50px"}},[t("img",{src:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?q=80&w=200&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"company-logo",class:"object-fit-cover img-fluid"})],-1),Vt={class:"d-flex flex-column justify-content-between"},At=t("small",{class:"text-dark-gray"},"提案人",-1),Bt={class:"text-dark-gray"},Lt={class:"position-lg-sticky",id:"targetSection"},Dt=["onClick"],Ft=["src"],Pt={class:"fs-6 text-dark-gray mb-0"},Rt={class:"d-flex justify-content-between align-items-center"},qt={class:"d-flex gap-2"},Et={class:"fw-bold mb-0"},Ht={class:"badge bg-info-light text-black"},Ot={key:0,class:"fs-6 badge bg-danger"},Ut={class:"text-dark-gray"},zt=t("small",{class:"text-dark-gray"},"一組內含：",-1),Gt={class:"list-unstyled mb-0"},Wt=t("hr",{class:"w-100 border-top my-1",style:{border:"3px dotted #8C8C8E"}},null,-1),Yt={class:"list-unstyled mb-0"},Jt=t("hr",{class:"w-100 border-top my-1",style:{border:"3px dotted #8C8C8E"}},null,-1),Kt=t("div",{class:"d-flex align-items-center gap-2"},[t("i",{class:"bi bi-check-circle-fill text-dark-secondary"}),t("small",null,"臺灣本島免運、可寄離島")],-1);function Xt(s,g,u,Zt,It,j){const h=x("RouterLink"),Q=x("RouterView");return e(),o(a,null,[t("div",V,[t("div",A,[t("div",B,[t("div",L,[t("nav",D,[t("small",F,[n(h,{to:{name:"home"},class:"nav-link text-decoration-none text-nowrap"},{default:_(()=>[c(i(s.$t("menu.home")),1)]),_:1})]),P,t("small",R,[n(h,{to:{name:"products"},class:"nav-link text-decoration-none text-nowrap"},{default:_(()=>[c(i(s.$t("menu.products")),1)]),_:1})])]),t("h2",q,i(s.product.title),1)])]),t("div",E,[t("div",H,[t("div",O,[t("img",{src:s.product.imageUrl,class:"card-img-top object-fit-cover img-fluid rounded",alt:"product-image",style:{"max-height":"400px"}},null,8,U),t("div",z,[t("div",G,[(e(!0),o(a,null,d(s.product.tags,(l,r)=>(e(),o("span",{key:r,class:"badge rounded-pill bg-primary text-white"},"# "+i(l),1))),128))]),t("div",W,[Y,t("small",J,i(s.product.proposer),1)])])])]),t("div",K,[t("div",X,[t("div",Z,[t("div",I,[t("div",tt,[t("div",st,[t("small",et,"目標 "+i(s.product.target_units)+" 組",1),(e(!0),o(a,null,d(s.productQtyMap,(l,r)=>(e(),o("div",{key:r},[s.product.id===r?(e(),o("h3",ot,"累計 "+i(l.productQty)+" 組",1)):p("",!0)]))),128))]),t("div",it,[rt,(e(!0),o(a,null,d(s.productQtyMap,(l,r)=>(e(),o("div",{key:r},[s.product.id===r?(e(),o("h3",lt,i(l.orderQty)+" 人",1)):p("",!0)]))),128))])])]),t("div",at,[(e(!0),o(a,null,d(s.productQtyMap,(l,r)=>(e(),o("div",{key:r,class:"d-flex justify-content-between align-items-center"},[s.product.id===r?(e(),o("div",dt,[s.product.id===r?(e(),o("div",{key:0,ref_for:!0,ref:"progressBar",class:"progress-bar progress-bar-striped progress-bar-animated bg-primary",role:"progressbar",style:T({width:(l.productQty/s.product.target_units*100).toFixed(2)+"%"})},null,4)):p("",!0)])):p("",!0),s.product.id===r?(e(),o("div",ct,[t("small",nt,i((l.productQty/s.product.target_units).toFixed(2)*100)+"%",1)])):p("",!0)]))),128))])]),t("p",pt,i(s.product.description),1),t("div",ut,[(e(!0),o(a,null,d(s.product.features,(l,r)=>(e(),o("div",{key:r,class:"d-flex justify-content-center gap-1"},[r===0?(e(),o("i",ht)):r===1?(e(),o("i",_t)):(e(),o("i",mt)),t("small",gt,i(l),1)]))),128))]),ft])])])])]),t("div",bt,[t("div",yt,[t("div",xt,[t("div",vt,[t("ul",wt,[t("li",null,[n(h,{to:{name:"product-content"},class:"text-gray text-decoration-none hvr-pop"},{default:_(()=>[c("專案內容")]),_:1})]),t("li",null,[n(h,{to:{name:"product-faq"},class:"text-gray text-decoration-none hvr-pop"},{default:_(()=>[c("常見問答")]),_:1})]),t("li",null,[n(h,{to:{name:"product-message"},class:"text-gray text-decoration-none hvr-pop"},{default:_(()=>[c("留言")]),_:1})])])]),kt])])]),Ct,t("div",jt,[t("div",Qt,[t("div",$t,[n(Q),t("div",Tt,[t("div",Mt,[t("div",St,[Nt,t("div",Vt,[At,t("span",Bt,i(s.product.proposer),1)])])]),t("div",Lt,[(e(!0),o(a,null,d(s.product.packages,(l,r)=>(e(),o("div",{key:r,class:"d-flex flex-column justify-content-between rounded-5 border border-5 border-light p-5 gap-3 mb-4 position-relative",style:{cursor:"pointer"}},[t("a",{onClick:m=>j.handleAddToCart(s.product.id,l.units),class:"stretched-link"},null,8,Dt),t("img",{src:s.product.imageUrl,alt:"product-image",class:"card-img-top object-fit-cover img-fluid rounded",style:{"max-height":"100px"}},null,8,Ft),t("h3",Pt,i(l.name),1),t("div",Rt,[t("div",qt,[t("h5",Et,"NT$ "+i(s.product.origin_price*s.product.discount*l.units),1),t("span",Ht,i(s.product.discount*100)+"折",1)]),s.productQtyMap[s.product.id]?(e(),o("span",Ot,"剩 "+i(s.product.target_units-s.productQtyMap[s.product.id].productQty)+" 組",1)):p("",!0)]),t("small",Ut,[c("預定售價 "),t("del",null,"NT$ "+i(s.product.origin_price),1),c("，現省 NT$ "+i((s.product.origin_price-s.product.origin_price*s.product.discount)*l.units),1)]),t("div",null,[zt,t("ul",Gt,[(e(!0),o(a,null,d(s.product.contents,(m,f)=>(e(),o("li",{key:f},i(m),1))),128))])]),Wt,t("ul",Yt,[(e(!0),o(a,null,d(s.product.notes,(m,f)=>(e(),o("li",{key:f},i(m),1))),128))]),Jt,Kt]))),128))])])])])])],64)}const as=$(N,[["render",Xt]]);export{as as default};
