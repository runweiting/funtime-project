import{y as v,z as g,A as c,H as d,_ as f,s as b,r as u,o as k,c as x,a,b as t,w as s,F as T,e as i}from"./index-_JC11hTP.js";import{s as m}from"./showSuccessToast-K-RHH7B1.js";import{s as L}from"./showErrorToast-3p2Y-3vb.js";var $={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"runweiting",VITE_TEXT:"這是部屬完成的環境",BASE_URL:"/funtime-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const A=v.useLoading(),{VITE_APP_URL:_}=$,E=g("loginStore",{actions:{checkLogin(){const o=A.show(),e=`${_}/api/user/check`,r=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*=\s*([^;]*).*$)|^.*$/,"$1");r&&(c.defaults.headers.common.Authorization=r),c.post(e).then(()=>{m("驗證成功")}).catch(l=>{L(l.response.data.message).then(()=>{d.push({name:"login"})})}).finally(()=>{o.hide()})},logout(){const o=`${_}/logout`;c.post(o).then(e=>{m(e.data.message).then(()=>{document.cookie="myToken=; expires=;",c.defaults.headers.common.Authorization=null,d.push({name:"home"})})})}}}),w={created(){this.checkLogin()},methods:{...b(E,["checkLogin","logout"])}},N={class:"navbar navbar-expand-lg navbar-dark bg-dark"},P={class:"container px-4"},S=a("a",{class:"navbar-brand mb-0",href:"index.html"},"UNIQLOLO",-1),V=a("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[a("span",{class:"navbar-toggler-icon"})],-1),y={class:"collapse navbar-collapse justify-content-end",id:"navbarNav"},R={class:"navbar-nav gap-2"},I={class:"nav-item"},B={class:"nav-item"},O={class:"nav-item"},U={class:"nav-item"},z={class:"nav-item"},C={class:"nav-item"};function D(o,e,r,l,j,F){const n=u("RouterLink"),h=u("router-view");return k(),x(T,null,[a("header",null,[a("nav",N,[a("div",P,[S,V,a("div",y,[a("ul",R,[a("li",I,[t(n,{to:{name:"admin/products"},class:"nav-link text-decoration-none"},{default:s(()=>[i("編輯商品")]),_:1})]),a("li",B,[t(n,{to:{name:"admin/orders"},class:"nav-link text-decoration-none"},{default:s(()=>[i("編輯訂單")]),_:1})]),a("li",O,[t(n,{to:{name:"admin/coupons"},class:"nav-link text-decoration-none"},{default:s(()=>[i("編輯優惠卷")]),_:1})]),a("li",U,[t(n,{to:{name:"admin/articles"},class:"nav-link text-decoration-none"},{default:s(()=>[i("編輯文章")]),_:1})]),a("li",z,[t(n,{to:{name:"home"},class:"nav-link text-decoration-none"},{default:s(()=>[i("回到前台")]),_:1})]),a("li",C,[a("button",{onClick:e[0]||(e[0]=(...p)=>o.logout&&o.logout(...p)),type:"button",class:"btn btn-warning"}," 登出 ")])])])])])]),a("main",null,[t(h)])],64)}const X=f(w,[["render",D]]);export{X as default};
