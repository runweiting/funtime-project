import{y as g,z as f,A as c,H as d,_ as b,s as k,r as m,o as x,c as $,a,b as t,w as s,F as A,e as i}from"./index-fCAb3gEa.js";import{s as u}from"./showSuccessToast-LIQr3UAc.js";import{s as _}from"./showErrorToast-_Do5t9Hk.js";var L={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"runweiting",BASE_URL:"/funtime-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const T=g.useLoading(),{VITE_APP_URL:h}=L,w=f("loginStore",{actions:{checkLogin(){const o=T.show(),e=`${h}/api/user/check`,l=document.cookie.replace(/(?:(?:^|.*;\s*)myToken\s*=\s*([^;]*).*$)|^.*$/,"$1");l&&(c.defaults.headers.common.Authorization=l),c.post(e).then(()=>{u("驗證成功")}).catch(r=>{_(r.response.data.message).then(()=>{d.push({name:"login"})})}).finally(()=>{o.hide()})},logout(){const o=`${h}/logout`;c.post(o).then(e=>{u(e.data.message).then(()=>{document.cookie="myToken=; expires=;",c.defaults.headers.common.Authorization=null,d.push({name:"home"})})}).catch(e=>{_(e.response.data.message)})}}}),R={created(){this.checkLogin()},methods:{...k(w,["checkLogin","logout"])}},V={class:"navbar navbar-expand-lg navbar-dark bg-dark"},E={class:"container px-4"},P=a("a",{class:"navbar-brand mb-0",href:"index.html"},"funtime",-1),S=a("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[a("span",{class:"navbar-toggler-icon"})],-1),y={class:"collapse navbar-collapse justify-content-end",id:"navbarNav"},N={class:"navbar-nav gap-2"},B={class:"nav-item"},z={class:"nav-item"},C={class:"nav-item"},D={class:"nav-item"},I={class:"nav-item"},U={class:"nav-item"};function j(o,e,l,r,F,H){const n=m("RouterLink"),p=m("RouterView");return x(),$(A,null,[a("header",null,[a("nav",V,[a("div",E,[P,S,a("div",y,[a("ul",N,[a("li",B,[t(n,{to:{name:"admin/products"},class:"nav-link text-decoration-none"},{default:s(()=>[i("編輯商品")]),_:1})]),a("li",z,[t(n,{to:{name:"admin/orders"},class:"nav-link text-decoration-none"},{default:s(()=>[i("編輯訂單")]),_:1})]),a("li",C,[t(n,{to:{name:"admin/coupons"},class:"nav-link text-decoration-none"},{default:s(()=>[i("編輯優惠卷")]),_:1})]),a("li",D,[t(n,{to:{name:"admin/articles"},class:"nav-link text-decoration-none"},{default:s(()=>[i("編輯文章")]),_:1})]),a("li",I,[t(n,{to:{name:"home"},class:"nav-link text-decoration-none"},{default:s(()=>[i("回到前台")]),_:1})]),a("li",U,[a("button",{onClick:e[0]||(e[0]=(...v)=>o.logout&&o.logout(...v)),type:"button",class:"btn btn-warning"}," 登出 ")])])])])])]),a("main",null,[t(p)])],64)}const G=b(R,[["render",j]]);export{G as default};
