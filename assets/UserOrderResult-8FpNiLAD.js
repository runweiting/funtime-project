import{_ as v,m as x,a as w,r as g,o as r,c as d,d as b,b as t,F as i,x as _,t as s,A as m,g as l}from"./index-8_2dSobz.js";import{u as y}from"./userOrderStore-xe7S_CrE.js";import{O as S}from"./OrderHeader-gopG_fYJ.js";import{O as T}from"./OrderSteps-EMIPtcB1.js";import{t as E}from"./timestampToDate-lwWXufjj.js";import"./showSuccessToast-NlkLUFHd.js";import"./showErrorToast-RmEj-76d.js";import"./userCartStore-_qhtbB7l.js";import"./userProductsStore-87MYB2Ca.js";import"./FundraisingSteps-apXtfXR6.js";const C={components:{OrderHeader:S,OrderSteps:T},data(){return{currentOrderSteps:3,currentFundraisingSteps:1,tempProductId:""}},mounted(){const{id:e}=this.$route.params;this.tempProductId=e,this.calculateQty()},computed:{...x(y,["tempOrder","tempOrderId","productQtyMap"])},methods:{...w(y,["calculateQty"]),formatDate(e){const{formattedDate:n,formattedTime:h}=E(e);return{formattedDate:n,formattedTime:h}},goToHome(){this.$router.push({name:"home"})},goToPayment(){this.currentOrderSteps=1,this.$router.push({name:"payment",params:{id:this.tempProductId}})}}},F={class:"mx-3 mx-lg-10"},N={class:"container px-lg-12 py-3 py-lg-6"},P={class:"row row-cols-1"},D={class:"col-md-6 col-lg-5 px-xl-4"},j=["src"],H={class:"text-dark-gray fw-normal mb-0"},I={class:"d-flex justify-content-between"},Q={class:"mb-0"},V={class:"d-flex gap-2"},B={class:"fs-5 fw-bold mb-0"},M={class:"badge bg-info-light text-black"},A={class:"text-dark-gray d-block mb-1"},U={class:"d-flex"},q={key:0,class:"badge text-dark-gray fw-normal me-2",style:{"background-color":"#E9ECEF"}},L=t("span",{class:"badge text-dark-gray fw-normal",style:{"background-color":"#E9ECEF"}},"目標達成 3 個月內出貨",-1),R=t("hr",{class:"w-100 border-top my-1",style:{border:"3px dotted #8C8C8E"}},null,-1),$=t("small",{class:"text-dark-gray"},"一組內含：",-1),z={class:"list-unstyled mb-0"},G=t("div",{class:"d-flex align-items-center gap-2"},[t("i",{class:"bi bi-check-circle-fill text-dark-secondary"}),t("small",null,"臺灣本島免運、可寄離島")],-1),J={class:"col-md-6 col-lg-7 px-xl-4 gy-3 gy-md-0"},K={class:"rounded-5 border border-5 border-light p-5 h-100 position-sticky top-0"},W={class:"row row-cols-1 gy-5"},X={class:"col px-8 px-xl-10"},Y={class:"row row-cols-1 row-cols-sm-2 align-items-center mb-4"},Z={class:"col-sm-7"},tt={class:"d-flex gap-2 text-dark-gray mb-2"},et=t("span",null,"訂單時間",-1),st={key:0},ot={class:"d-flex gap-2 text-dark-gray"},rt=t("span",null,"訂單編號",-1),dt={class:"col-sm-5"},lt={key:0,class:"d-flex justify-content-start justify-content-sm-center align-items-center gap-2 gap-lg-4 pt-4 pt-sm-0"},nt=t("i",{class:"bi bi-check-circle-fill text-dark-secondary fs-4"},null,-1),at=t("h4",{class:"mb-0"},"預購成功",-1),ct=[nt,at],it={class:"col px-xl-5"},mt={class:"d-flex flex-column justify-content-between"},pt={class:"rounded-5 border border-light border-3 p-4 mb-5"},ut=t("thead",null,[t("tr",null,[t("th",{scope:"col",colspan:"3",class:"fs-5"},"預購資訊")])],-1),_t={class:"align-middle"},ht=t("th",{scope:"row"},[l("預購"),t("br",{class:"d-414-block"}),l("金額")],-1),gt={class:"fs-5 fw-bold"},bt={key:0,class:"d-flex gap-2 mt-1"},yt=t("i",{class:"bi bi-check-circle-fill text-dark-secondary"},null,-1),ft={class:"text-dark-gray"},kt={class:"text-dark-gray"},Ot=t("th",{scope:"row"},[l("收件"),t("br",{class:"d-414-block"}),l("訊息")],-1),vt={colspan:"2"},xt={class:"list-unstyled mb-0 text-dark-gray"},wt=t("th",{scope:"row"},[l("付款"),t("br",{class:"d-414-block"}),l("狀態")],-1),St={colspan:"2"},Tt={class:"d-flex align-items-center gap-2"},Et={class:"text-end"};function Ct(e,n,h,Ft,c,a){const f=g("OrderHeader"),k=g("OrderSteps");return r(),d(i,null,[b(f,{currentFundraisingSteps:c.currentFundraisingSteps},null,8,["currentFundraisingSteps"]),b(k,{currentOrderSteps:c.currentOrderSteps},null,8,["currentOrderSteps"]),t("div",F,[t("div",N,[t("div",P,[t("div",D,[(r(!0),d(i,null,_(e.tempOrder.products,(o,p)=>(r(),d("div",{key:p,class:"d-flex flex-column justify-content-between rounded-5 border border-5 border-light p-5 gap-3 position-relative mb-3"},[t("img",{src:o.product.imageUrl,alt:"product-image",class:"card-img-top object-fit-cover img-fluid rounded",style:{"max-height":"200px"}},null,8,j),t("h6",H,s(o.product.short_title),1),t("div",I,[t("h5",Q,s(o.qty)+" 入組",1),t("div",V,[t("h6",B,"NT$ "+s(e.tempOrder.total),1),t("span",M,s(o.product.discount*100)+"折",1)])]),t("div",null,[t("small",A,[l("預定售價 "),t("del",null,"NT$ "+s(o.product.origin_price),1),l("，折扣後 NT$ "+s(o.product.origin_price*o.product.discount),1)]),t("div",U,[e.productQtyMap[c.tempProductId]?(r(),d("span",q,"預購人數 "+s(e.productQtyMap[c.tempProductId].orderQty)+" 次",1)):m("",!0),L])]),R,t("div",null,[$,t("ul",z,[(r(!0),d(i,null,_(o.product.contents,(u,O)=>(r(),d("li",{key:O},s(u),1))),128))])]),G]))),128))]),t("div",J,[t("div",K,[t("div",W,[t("div",X,[t("div",Y,[t("div",Z,[t("div",tt,[et,e.tempOrder.create_at?(r(),d("span",st,s(a.formatDate(e.tempOrder.create_at).formattedDate)+" "+s(a.formatDate(e.tempOrder.create_at).formattedTime),1)):m("",!0)]),t("div",ot,[rt,t("span",null,s(e.tempOrder.id),1)])]),t("div",dt,[e.tempOrder.id?(r(),d("div",lt,ct)):m("",!0)])])]),t("div",it,[t("div",mt,[t("div",pt,[(r(!0),d(i,null,_(e.tempOrder.products,(o,p)=>(r(),d("table",{key:p,class:"table table-border mb-0"},[ut,t("tbody",_t,[t("tr",null,[ht,t("td",null,[t("span",gt,"NT$ "+s(o.final_total)+"元",1),o.coupon?(r(),d("div",bt,[yt,t("span",ft,"已使用優惠卷："+s(o.coupon.code),1),t("span",kt,s(o.coupon.title),1)])):m("",!0)])]),t("tr",null,[Ot,t("td",vt,[t("ul",xt,[t("li",null,"姓名："+s(e.tempOrder.user.name),1),t("li",null,"手機："+s(e.tempOrder.user.tel),1),t("li",null,"Email："+s(e.tempOrder.user.email),1),t("li",null,"運送："+s(e.tempOrder.user.shipment),1),t("li",null,"地址："+s(e.tempOrder.user.postcode)+s(e.tempOrder.user.country)+s(e.tempOrder.user.city)+s(e.tempOrder.user.region)+s(e.tempOrder.user.address),1),t("li",null,"備註："+s(e.tempOrder.user.message),1)])])]),t("tr",null,[wt,t("td",St,[t("div",Tt,[t("button",{onClick:n[0]||(n[0]=(...u)=>a.goToPayment&&a.goToPayment(...u)),class:"btn btn-primary-light text-white",type:"button"},"前往付款")])])])])]))),128))]),t("div",Et,[t("button",{onClick:n[1]||(n[1]=(...o)=>a.goToHome&&a.goToHome(...o)),type:"button",class:"btn btn-primary text-white"},"前往首頁")])])])])])])])])])],64)}const At=v(C,[["render",Ct]]);export{At as default};
