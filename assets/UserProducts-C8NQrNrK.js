import{_ as v,o as n,c as r,t as u,u as O,v as F,m as b,x as L,y as q,a as t,F as V,z as E,s as x,r as _,b as h,e as $,A as S,B as N,C as R,d as f}from"./index-WxtyeiqM.js";import{u as T}from"./userProductsStore-E_I76wL3.js";import{l as A,c as B}from"./cartStore-iOdwmFat.js";import{s as I}from"./showErrorToast-jtdzvrxD.js";import{P as z}from"./PaginationGroup-awv-a-Io.js";import{C as H}from"./CartList-0Egpf1w6.js";import"./showSuccessToast-amH4LwP2.js";import"./modalMixin-uvxk93tA.js";import"./couponsStore-Kd7TTIW1.js";let D=0;const C="webkit moz ms o".split(" ");let d,p;const M=typeof window>"u";if(M)d=function(){},p=function(){};else{d=window.requestAnimationFrame,p=window.cancelAnimationFrame;let s;for(let e=0;e<C.length&&!(d&&p);e++)s=C[e],d=d||window[s+"RequestAnimationFrame"],p=p||window[s+"CancelAnimationFrame"]||window[s+"CancelRequestAnimationFrame"];(!d||!p)&&(d=function(e){const i=new Date().getTime(),a=Math.max(0,16-(i-D)),o=window.setTimeout(()=>{e(i+a)},a);return D=i+a,o},p=function(e){window.clearTimeout(e)})}const G={props:{startVal:{type:Number,required:!1,default:0},endVal:{type:Number,required:!1,default:2017},duration:{type:Number,required:!1,default:3e3},autoplay:{type:Boolean,required:!1,default:!0},decimals:{type:Number,required:!1,default:0,validator(s){return s>=0}},decimal:{type:String,required:!1,default:"."},separator:{type:String,required:!1,default:","},prefix:{type:String,required:!1,default:""},suffix:{type:String,required:!1,default:""},useEasing:{type:Boolean,required:!1,default:!0},easingFn:{type:Function,default(s,e,i,a){return i*(-Math.pow(2,-10*s/a)+1)*1024/1023+e}}},data(){return{localStartVal:this.startVal,displayValue:this.formatNumber(this.startVal),printVal:null,paused:!1,localDuration:this.duration,startTime:null,timestamp:null,remaining:null,rAF:null}},computed:{countDown(){return this.startVal>this.endVal}},watch:{startVal(){this.autoplay&&this.start()},endVal(){this.autoplay&&this.start()}},mounted(){this.autoplay&&this.start(),this.$emit("mountedCallback")},methods:{start(){this.localStartVal=this.startVal,this.startTime=null,this.localDuration=this.duration,this.paused=!1,this.rAF=d(this.count)},pauseResume(){this.paused?(this.resume(),this.paused=!1):(this.pause(),this.paused=!0)},pause(){p(this.rAF)},resume(){this.startTime=null,this.localDuration=+this.remaining,this.localStartVal=+this.printVal,d(this.count)},reset(){this.startTime=null,p(this.rAF),this.displayValue=this.formatNumber(this.startVal)},count(s){this.startTime||(this.startTime=s),this.timestamp=s;const e=s-this.startTime;this.remaining=this.localDuration-e,this.useEasing?this.countDown?this.printVal=this.localStartVal-this.easingFn(e,0,this.localStartVal-this.endVal,this.localDuration):this.printVal=this.easingFn(e,this.localStartVal,this.endVal-this.localStartVal,this.localDuration):this.countDown?this.printVal=this.localStartVal-(this.localStartVal-this.endVal)*(e/this.localDuration):this.printVal=this.localStartVal+(this.endVal-this.localStartVal)*(e/this.localDuration),this.countDown?this.printVal=this.printVal<this.endVal?this.endVal:this.printVal:this.printVal=this.printVal>this.endVal?this.endVal:this.printVal,this.displayValue=this.formatNumber(this.printVal),e<this.localDuration?this.rAF=d(this.count):this.$emit("callback")},isNumber(s){return!isNaN(parseFloat(s))},formatNumber(s){s=s.toFixed(this.decimals),s+="";const e=s.split(".");let i=e[0];const a=e.length>1?this.decimal+e[1]:"",o=/(\d+)(\d{3})/;if(this.separator&&!this.isNumber(this.separator))for(;o.test(i);)i=i.replace(o,"$1"+this.separator+"$2");return this.prefix+i+a+this.suffix}},destroyed(){p(this.rAF)}};function U(s,e,i,a,o,m){return n(),r("span",null,u(o.displayValue),1)}const g=v(G,[["render",U]]);function W(s,e,i){return e in s?Object.defineProperty(s,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[e]=i,s}function k(s,e){var i=Object.keys(s);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(s);e&&(a=a.filter(function(o){return Object.getOwnPropertyDescriptor(s,o).enumerable})),i.push.apply(i,a)}return i}g.unmounted=g.destroyed,Reflect.deleteProperty(g,"destroyed");var Y=function(s){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?k(Object(i),!0).forEach(function(a){W(s,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(i)):k(Object(i)).forEach(function(a){Object.defineProperty(s,a,Object.getOwnPropertyDescriptor(i,a))})}return s}({name:"CountTo",emits:["callback","mountedCallback"]},g),X={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"runweiting",VITE_TEXT:"這是部屬完成的環境",BASE_URL:"/funtime-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:J,VITE_APP_PATH:K}=X,w=O("categoryStore",{state:()=>({categoryList:[]}),actions:{getCategory(){const s=`${J}/api/${K}/products/all`;F.get(s).then(e=>{const{products:i}=e.data,a=new Set(i.map(o=>o.category));this.categoryList=[...a]})}}}),Q={emits:["category-selected"],data(){return{currentCategory:""}},watch:{currentCategory(){this.$emit("category-selected",this.currentCategory,1)}},computed:{...b(w,["categoryList"])}},Z=t("option",{value:""},"全部",-1),tt=["value"];function st(s,e,i,a,o,m){return n(),r("div",null,[L(t("select",{"onUpdate:modelValue":e[0]||(e[0]=c=>o.currentCategory=c),class:"form-select form-select-sm"},[Z,(n(!0),r(V,null,E(s.categoryList,c=>(n(),r("option",{key:c,value:c},u(c),9,tt))),128))],512),[[q,o.currentCategory]])])}const et=v(Q,[["render",st]]);var it={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"runweiting",VITE_TEXT:"這是部屬完成的環境",BASE_URL:"/funtime-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:at,VITE_APP_PATH:ot}=it,lt={components:{CategoryList:et,PaginationGroup:z},data(){return{title:"商品列表",product:{}}},mounted(){this.getProducts(),this.getCategory()},computed:{...b(T,["productList"]),...b(w,["categoryList"]),...b(A,["loadingStatus"])},methods:{...x(T,["getProducts"]),...x(B,["addToCart"]),...x(w,["getCategory"]),handleCategoryChange(s){this.getProducts(s)},handlePageChange(s,e){this.getProducts(s,e)},async getProduct(s){const e=A();e.loadingStatus.getProduct=s;const i=`${at}/api/${ot}/product/${s}`;this.$route.params.id=s;try{const a=await this.axios.get(i);this.product=a.data.product,e.loadingStatus.getProduct=""}catch(a){I(a.response.data.message)}finally{this.$router.push({name:"productInfo"})}}}},P=s=>(N("data-v-1c467459"),s=s(),R(),s),nt={class:"col-8 mt-4 mb-4",ref:"productList"},rt={class:"container d-flex justify-content-between"},ct={class:"p-2 mb-0"},dt={class:"container table-responsive"},pt={class:"table table-hover align-middle"},ut={class:"table-secondary"},ht={class:"align-middle fw-bold",style:{height:"48px"}},mt={scope:"col",style:{width:"17%"}},ft=P(()=>t("th",{scope:"col",style:{width:"30%"}},"商品名稱",-1)),_t=P(()=>t("th",{scope:"col",style:{width:"28%"}},"價格",-1)),bt=P(()=>t("th",{scope:"col",style:{width:"25%"}},null,-1)),gt=["src"],vt={key:0,class:"fs-5 fw-bold mb-0"},yt={key:1},xt={class:"fs-6 fw-bold text-secondary"},wt={class:"fs-5 fw-bold mb-0"},Vt={class:"d-flex flex-column gap-2"},Pt=["disabled","onClick"],$t={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},St=["onClick"],Tt={key:0,class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"};function At(s,e,i,a,o,m){const c=_("category-list"),y=_("pagination-group");return n(),r("div",nt,[t("div",rt,[t("h2",null,u(o.title),1),t("p",ct,u(`目前有 ${s.productList.length} 項商品`),1)]),t("div",dt,[t("table",pt,[t("thead",ut,[t("tr",ht,[t("th",mt,[h(c,{onCategorySelected:m.handleCategoryChange},null,8,["onCategorySelected"])]),ft,_t,bt])]),t("tbody",null,[(n(!0),r(V,null,E(s.productList,l=>(n(),r("tr",{key:l.title},[t("td",null,[t("img",{src:l.imageUrl,class:"rounded product-img"},null,8,gt)]),t("td",null,u(l.title),1),t("td",null,[l.origin_price===l.price?(n(),r("p",vt,u(l.price)+"元 ",1)):(n(),r("div",yt,[t("del",xt,"原價"+u(l.origin_price)+"元",1),t("p",wt,"現在只要"+u(l.price)+"元",1)]))]),t("td",null,[t("div",Vt,[t("button",{disabled:l.id===this.loadingStatus.getProduct,onClick:j=>m.getProduct(l.id),type:"button",class:"btn btn-outline-secondary",id:"modalBtn"},[$(" 查看更多 "),l.id===this.loadingStatus.getProduct?(n(),r("span",$t)):S("",!0)],8,Pt),t("button",{onClick:j=>s.addToCart(l.id),type:"button",class:"btn btn-outline-danger"},[$(" 加入購物車 "),l.id===this.loadingStatus.updateQty?(n(),r("span",Tt)):S("",!0)],8,St)])])]))),128))])]),h(y,{onPageSelected:m.handlePageChange},null,8,["onPageSelected"])])],512)}const Dt=v(lt,[["render",At],["__scopeId","data-v-1c467459"]]),Ct={components:{ProductList:Dt,CartList:H,CountTo:Y}},kt=f('<div class="m-3 m-lg-6"><div class="container bg-primary rounded-5 p-5 p-md-10" data-aos="fade-up"><div class="row"><div class="col"><div class="d-flex flex-column justify-content-center align-items-center gap-5"><h2 class="fs-1 text-white fw-bold mb-0">企劃排名</h2><h5 class="text-white responsive-lh-ls text-normal mb-0"> 對喜歡的企劃按贊、留言，增加人氣，告訴我們你的想法，一起探索信仰的美好！ </h5></div></div></div></div></div>',1),Et={class:"m-3 m-lg-6"},jt={class:"container p-5 p-md-10","data-aos":"fade-up"},Ot={class:"row row-cols-1 row-cols-xl-2"},Ft={class:"col-xl-9"},Lt=f('<div class="row row-cols-1"><div class="col px-0 px-md-3 mb-3 mb-lg-6"><div class="d-flex align-items-baseline gap-2"><h2 class="d-none d-sm-block fw-bold mb-0">Ranking</h2><h4 class="fw-bold mb-0">企劃排名</h4></div></div></div>',1),qt={class:"row row-cols-1 row-cols-md-2 row-cols-xl-3 gy-5 mb-5 mb-md-10 position-relative"},Nt={class:"col mb-md-0 px-0 px-md-3"},Rt={class:"card h-100 shadow-sm position-relative"},Bt=f('<a href="#" class="stretched-link"></a><button type="button" class="btn position-absolute p-0 hvr-pulse"><i class="bi bi-heart-fill fs-5"></i></button><div class="position-relative"><img src="https://images.unsplash.com/photo-1585084293063-45ae031e7df4?q=80&amp;w=500&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="card-img-top" alt="boardGame1"><span class="badge rounded-pill bg-white text-primary position-absolute z-index-8" style="bottom:16px;right:16px;"># 讀經工具</span></div>',3),It={class:"card-body d-flex flex-column justify-content-between"},zt=t("h5",{class:"card-title fw-bold"},"《走入創世記》讀經進度結合地圖說故事",-1),Ht={class:"row gx-0"},Mt=t("div",{class:"col-4"},[t("div",{class:"h-100 pt-4"},[t("small",{class:"fst-italic text-gray-dark"},"累計")])],-1),Gt={class:"col-8"},Ut={class:"d-flex justify-content-end align-items-baseline gap-2"},Wt=t("div",{class:"d-flex align-items-center gap-2"},[t("small",{class:"fst-italic fw-bold"},"個"),t("i",{class:"bi bi-heart-fill text-primary"})],-1),Yt={class:"col mb-md-0 px-0 px-md-3"},Xt={class:"card h-100 shadow-sm position-relative"},Jt=f('<a href="#" class="stretched-link"></a><button type="button" class="btn position-absolute p-0 hvr-pulse"><i class="bi bi-heart-fill fs-5"></i></button><div class="position-relative"><img src="https://images.unsplash.com/photo-1585084293063-45ae031e7df4?q=80&amp;w=500&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="card-img-top" alt="boardGame1"><span class="badge rounded-pill bg-white text-primary position-absolute z-index-8" style="bottom:16px;right:16px;"># 讀經工具</span></div>',3),Kt={class:"card-body d-flex flex-column justify-content-between"},Qt=t("h5",{class:"card-title fw-bold"},"《365萬用貼紙卡片》將美好經句貼在任何地方",-1),Zt={class:"row gx-0"},ts=t("div",{class:"col-4"},[t("div",{class:"h-100 pt-4"},[t("small",{class:"fst-italic text-muted"},"累計")])],-1),ss={class:"col-8"},es={class:"d-flex justify-content-end align-items-baseline gap-2"},is=t("div",{class:"d-flex align-items-center gap-2"},[t("small",{class:"fst-italic fw-bold"},"個"),t("i",{class:"bi bi-heart-fill text-primary"})],-1),as={class:"col mb-md-0 px-0 px-md-3"},os={class:"card h-100 shadow-sm position-relative"},ls=f('<a href="#" class="stretched-link"></a><button type="button" class="btn position-absolute p-0 hvr-pulse"><i class="bi bi-heart-fill fs-5"></i></button><div class="position-relative"><img src="https://images.unsplash.com/photo-1585084293063-45ae031e7df4?q=80&amp;w=500&amp;auto=format&amp;fit=crop&amp;ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" class="card-img-top" alt="boardGame1"><span class="badge rounded-pill bg-white text-primary position-absolute z-index-8" style="bottom:16px;right:16px;"># 讀經工具</span></div>',3),ns={class:"card-body d-flex flex-column justify-content-between"},rs=t("h5",{class:"card-title fw-bold"},"《#followJesus追蹤刺繡貼》你生命中的 #是什麼？",-1),cs={class:"row gx-0"},ds=t("div",{class:"col-4"},[t("div",{class:"h-100 pt-4"},[t("small",{class:"fst-italic text-muted"},"累計")])],-1),ps={class:"col-8"},us={class:"d-flex justify-content-end align-items-baseline gap-2"},hs=t("div",{class:"d-flex align-items-center gap-2"},[t("small",{class:"fst-italic fw-bold"},"個"),t("i",{class:"bi bi-heart-fill text-primary"})],-1),ms=t("div",{class:"col bg-secondary rounded-5 position-absolute z-index-n1 d-none d-md-block",style:{width:"100%",height:"40px",bottom:"-20px"}},null,-1),fs=f('<div class="col-xl-3"><div class="row row-cols-1"><div class="col px-0 px-md-3 mb-3 mb-lg-6"><div class="d-flex align-items-baseline gap-2"><h2 class="d-none d-sm-block fw-bold mb-0">Category</h2><h4 class="fw-bold mb-0">熱門標籤</h4></div></div></div><div class="row row-cols-1"><div class="col px-0 px-md-3"><div class="bg-light rounded-5 p-5"><ol class="row row-cols-1 list-unstyled gy-2 mb-0"><li class="col-md-6 col-xl-12"><div class="row align-items-center"><div class="col-3 px-0 d-flex justify-content-end align-items-center gap-2 pe-1"><div class="bg-white border rounded-circle border-3 border-black position-relative" style="width:35px;height:35px;"><span class="text-black position-absolute top-50 start-50 translate-middle z-index-10" style="font-size:18px;">1</span></div><span class="text-black" style="font-size:18px;">#</span></div><div class="col-9 px-0"><span class="text-black text-wrap" style="font-size:18px;">總是讀不完創世記呀～</span></div></div></li><li class="col-md-6 col-xl-12"><div class="row align-items-center"><div class="col-3 px-0 d-flex justify-content-end align-items-center gap-2 pe-1"><div class="bg-white border rounded-circle border-3 border-black position-relative" style="width:35px;height:35px;"><span class="text-black position-absolute top-50 start-50 translate-middle z-index-10" style="font-size:18px;">1</span></div><span class="text-black" style="font-size:18px;">#</span></div><div class="col-9 px-0"><span class="text-black text-wrap" style="font-size:18px;">總是讀不完創世記呀～</span></div></div></li></ol></div></div></div></div>',1),_s={class:"container"},bs=t("h1",{class:"pt-5 text-center"},"商品列表",-1),gs={class:"row py-2"};function vs(s,e,i,a,o,m){const c=_("count-to"),y=_("product-list"),l=_("cart-list");return n(),r(V,null,[kt,t("div",Et,[t("div",jt,[t("div",Ot,[t("div",Ft,[Lt,t("div",qt,[t("div",Nt,[t("div",Rt,[Bt,t("div",It,[zt,t("div",Ht,[Mt,t("div",Gt,[t("div",Ut,[h(c,{startVal:0,endVal:50,duration:5e3,ref:s.refset,class:"display-1 fst-italic fw-bold"},null,512),Wt])])])])])]),t("div",Yt,[t("div",Xt,[Jt,t("div",Kt,[Qt,t("div",Zt,[ts,t("div",ss,[t("div",es,[h(c,{startVal:0,endVal:100,duration:5e3,ref:s.refset,class:"display-1 fst-italic fw-bold"},null,512),is])])])])])]),t("div",as,[t("div",os,[ls,t("div",ns,[rs,t("div",cs,[ds,t("div",ps,[t("div",us,[h(c,{startVal:0,endVal:30,duration:5e3,ref:s.refset,class:"display-1 fst-italic fw-bold"},null,512),hs])])])])])]),ms])]),fs])])]),t("main",_s,[bs,t("div",gs,[h(y),h(l)])])],64)}const Ds=v(Ct,[["render",vs]]);export{Ds as default};
