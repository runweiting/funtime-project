import{C as u,B as h,D as o}from"./index-TFW6QGXf.js";import{s as n}from"./showSuccessToast-TNVcc7d0.js";import{s as c}from"./showErrorToast-H8uiVGa1.js";var l={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"runweiting",BASE_URL:"/funtime-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const m=u.useLoading({}),{VITE_APP_URL:i,VITE_APP_PATH:d}=l,$=h("userCartStore",{state:()=>({cartList:[],cartTotal:0,tempCartId:"",tempCart:{},router:null}),actions:{addToCart(a,t){const s=`${i}/api/${d}/cart`,e={product_id:a,qty:t};o.post(s,{data:e}).then(r=>{n(r.data.message)}).catch(r=>{c(r.response)})},async getCart(a){const t=m.show(),s=`${i}/api/${d}/cart`;try{const e=await o.get(s);this.cartList=e.data.data.carts,this.cartTotal=e.data.data.total,this.tempCart=this.cartList.find(r=>r.product.id===a),this.tempCart&&(this.tempCartId=this.tempCart.id)}catch(e){c(e.response.data.message)}finally{t.hide()}},async putCart(a,t,s){const e=`${i}/api/${d}/cart/${t}`,r={product_id:a,qty:Number(s)};try{const p=await o.put(e,{data:r});n(p.data.message)}catch(p){c(p.response.data.message)}finally{this.getCart()}},deleteCart(a){const t=`${i}/api/${d}/cart/${a}`;o.delete(t).then(s=>{n(s.data.message),this.getCart()}).catch(s=>{c(s.response.data.message)})},deleteCarts(){const a=`${i}/api/${d}/carts`;o.delete(a).then(t=>{n(t.data.message),this.getCart()}).catch(t=>{c(t.response.data.message)})}}});export{$ as u};
