import{_ as k,m as x,r as m,o as r,c as l,b,a as s,F as a,u as _,t,x as i,e as d}from"./index-JVHHjXV0.js";import{u as v}from"./userOrderStore-iGmveWcI.js";import{O as w}from"./OrderHeader-B454bz_u.js";import{O as T}from"./OrderSteps-AZ45wSGI.js";import{t as S}from"./timestampToDate-lwWXufjj.js";import"./showSuccessToast-vmBLG2Pt.js";import"./showErrorToast-Kzq5RtGu.js";import"./userCartStore-RW811zN0.js";const O={components:{OrderHeader:w,OrderSteps:T},data(){return{currentOrderSteps:3,currentFundraisingSteps:1}},computed:{...x(v,["order"])},methods:{formatDate(o){const{formattedDate:n,formattedTime:p}=S(o);return{formattedDate:n,formattedTime:p}},goToHome(){this.$router.push({name:"home"})},goToPayment(){this.currentOrderSteps=1,this.$router.push({name:"payment"})}}},N={class:"mx-3 mx-lg-10"},D={class:"container px-lg-12 py-3 py-lg-6"},j={class:"row row-cols-1 gy-3"},q={class:"col-md-4 px-xl-4"},C={class:"position-md-sticky"},F=["src"],H={class:"fs-6 text-dark-gray mb-0"},V={class:"d-flex justify-content-between align-items-center"},B={class:"d-flex gap-2"},E={class:"fw-bold mb-0"},P={class:"badge bg-info-light text-black"},U={class:"fs-6 badge bg-danger"},$={class:"text-dark-gray"},G=s("span",null,"本方案內含：",-1),L=s("br",null,null,-1),R={class:"fs-5 fw-bold"},z=s("hr",{class:"w-100 border-top my-1",style:{border:"3px dotted #8C8C8E"}},null,-1),A=s("div",{class:"d-flex align-items-center gap-2"},[s("i",{class:"bi bi-check-circle-fill text-dark-secondary"}),s("small",null,"臺灣本島免運、可寄離島")],-1),I={key:0,class:"col-md-8 px-xl-4"},J={class:"rounded-5 border border-5 border-light p-5 h-100"},K={class:"row row-cols-1 gy-5"},M={class:"col px-8 px-xl-10"},Q={class:"row row-cols-1 row-cols-sm-2 align-items-center"},W={class:"col-sm-7"},X={class:"d-flex gap-2 text-dark-gray mb-2"},Y=s("span",null,"訂單時間",-1),Z={key:0},ss={class:"d-flex gap-2 text-dark-gray"},ts=s("span",null,"訂單編號",-1),es={class:"col-sm-5"},os={key:0,class:"d-flex justify-content-start justify-content-sm-center align-items-center gap-2 gap-lg-4 pt-4 pt-sm-0"},rs=s("i",{class:"bi bi-check-circle-fill text-dark-secondary fs-4"},null,-1),ls=s("h4",{class:"mb-0"},"預購成功",-1),ds=[rs,ls],ns={class:"col px-xl-5"},cs={class:"d-flex flex-column justify-content-between"},as={class:"rounded-5 border border-light border-3 p-4 mb-5"},is=s("thead",null,[s("tr",null,[s("th",{scope:"col",colspan:"3",class:"fs-5"},"預購資訊")])],-1),us={class:"align-middle"},_s=s("th",{scope:"row"},[d("預購"),s("br",{class:"d-414-block"}),d("金額")],-1),ps={class:"fs-5 fw-bold"},hs={key:0,class:"d-flex gap-2 mt-1"},ms=s("i",{class:"bi bi-check-circle-fill text-dark-secondary"},null,-1),bs={class:"text-dark-gray"},gs={class:"text-dark-gray"},ys=s("th",{scope:"row"},[d("預購"),s("br",{class:"d-414-block"}),d("內容")],-1),fs={class:"fs-5 fw-bold"},ks={class:"text-dark-gray mt-1"},xs=s("th",{scope:"row"},[d("收件"),s("br",{class:"d-414-block"}),d("訊息")],-1),vs={colspan:"2"},ws={class:"list-unstyled mb-0 text-dark-gray"},Ts=s("th",{scope:"row"},[d("付款"),s("br",{class:"d-414-block"}),d("狀態")],-1),Ss={colspan:"2"},Os={class:"d-flex align-items-center gap-2"},Ns=s("i",{class:"bi bi-pause-circle-fill text-gray"},null,-1),Ds=s("span",{class:"text-dark-gray"},"尚未開放付款",-1),js={class:"text-end"};function qs(o,n,p,Cs,h,c){const g=m("order-header"),y=m("order-steps");return r(),l(a,null,[b(g,{currentFundraisingSteps:h.currentFundraisingSteps},null,8,["currentFundraisingSteps"]),b(y,{currentOrderSteps:h.currentOrderSteps},null,8,["currentOrderSteps"]),s("div",N,[s("div",D,[s("div",j,[s("div",q,[s("div",C,[(r(!0),l(a,null,_(o.order.products,e=>(r(),l("div",{key:e.id,class:"d-flex flex-column justify-content-between rounded-5 border border-5 border-light p-5 gap-3 position-relative"},[s("img",{src:e.product.imageUrl,class:"card-img-top object-fit-cover img-fluid rounded",alt:"boardGame1",style:{"max-height":"100px"}},null,8,F),s("h3",H,t(e.qty)+" 入組",1),s("div",V,[s("div",B,[s("h5",E,"NT$ "+t(e.total),1),s("span",P,t(e.product.discount*100)+"折",1)]),s("span",U,"剩餘"+t(e.product.target_units-e.qty)+"份",1)]),s("small",$,[d("預定售價 "),s("del",null,"NT$ "+t(e.product.origin_price),1),d("，現省 NT$ "+t(e.product.origin_price*e.qty-e.product.origin_price*e.product.discount*e.qty),1)]),s("div",null,[G,L,s("span",R,t(e.product.short_title)+t(e.qty)+" 套",1)]),z,A]))),128))])]),o.order.id?(r(),l("div",I,[s("div",J,[s("div",K,[s("div",M,[s("div",Q,[s("div",W,[s("div",X,[Y,o.order.create_at?(r(),l("span",Z,t(c.formatDate(o.order.create_at).formattedDate)+" "+t(c.formatDate(o.order.create_at).formattedTime),1)):i("",!0)]),s("div",ss,[ts,s("span",null,t(o.order.id),1)])]),s("div",es,[o.order.id?(r(),l("div",os,ds)):i("",!0)])])]),s("div",ns,[s("div",cs,[s("div",as,[(r(!0),l(a,null,_(o.order.products,e=>(r(),l("table",{key:e.id,class:"table table-border mb-0"},[is,s("tbody",us,[s("tr",null,[_s,s("td",null,[s("span",ps,"NT$ "+t(e.total)+"元",1),e.coupon?(r(),l("div",hs,[ms,s("span",bs,"已使用優惠卷："+t(e.coupon.code),1),s("span",gs,t(e.coupon.title),1)])):i("",!0)])]),s("tr",null,[ys,s("td",null,[s("span",fs,t(e.product.short_title)+t(e.qty)+"套",1),s("div",ks,[d(" 完整 1 套內含： "),(r(!0),l(a,null,_(e.product.contents,(u,f)=>(r(),l("ul",{key:f,class:"list-unstyled mb-0"},[s("li",null,t(u),1)]))),128))])])]),s("tr",null,[xs,s("td",vs,[s("ul",ws,[s("li",null,"姓名："+t(o.order.user.name),1),s("li",null,"手機："+t(o.order.user.tel),1),s("li",null,"Email："+t(o.order.user.email),1),s("li",null,"運送："+t(o.order.user.shipment),1),s("li",null,"地址："+t(o.order.user.postcode)+t(o.order.user.country)+t(o.order.user.city)+t(o.order.user.region)+t(o.order.user.address),1),s("li",null,"備註："+t(o.order.user.message),1)])])]),s("tr",null,[Ts,s("td",Ss,[s("div",Os,[Ns,Ds,s("button",{onClick:n[0]||(n[0]=(...u)=>c.goToPayment&&c.goToPayment(...u)),class:"btn btn-primary-light text-white",type:"button"},"前往付款")])])])])]))),128))]),s("div",js,[s("button",{onClick:n[1]||(n[1]=(...e)=>c.goToHome&&c.goToHome(...e)),type:"button",class:"btn btn-primary text-white"},"前往首頁")])])])])])])):i("",!0)])])])],64)}const Gs=k(O,[["render",qs]]);export{Gs as default};
