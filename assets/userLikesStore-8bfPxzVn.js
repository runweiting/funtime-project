import{B as l}from"./index-DW-YAaVl.js";import{s as r}from"./showSuccessToast-4Q0mJWPL.js";import{u as c}from"./userProductsStore-ag1QJfWQ.js";const s=c(),p=l({id:"userLikesStore",state:()=>({tempCollection:[],preferenceState:{}}),actions:{async initPreferenceState(){s.getProducts();const{productList:e}=s;let t=localStorage.getItem("preferenceState");t?t=JSON.parse(t):t=e.reduce((o,i)=>(o[i.id]={isLiked:!1},o),{}),this.preferenceState=t},addToCollection(e){this.tempCollection.push({product:e}),this.preferenceState[e.id].isLiked=!0,r("已加入收藏清單"),localStorage.setItem("preferenceState",JSON.stringify(this.preferenceState)),localStorage.setItem("tempCollection",JSON.stringify(this.tempCollection))},removeCollection(e){const t=this.tempCollection.filter(o=>o.product.id!==e);this.tempCollection=t,this.preferenceState[e].isLiked=!1,r("已移除收藏清單"),localStorage.setItem("preferenceState",JSON.stringify(this.preferenceState)),localStorage.setItem("tempCollection",JSON.stringify(this.tempCollection))}}});export{p as u};
