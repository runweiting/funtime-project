import{J as v,u as k,v as u,m as h,_ as S,o as d,c as p,a as n,D as g,N as m,F as y,z as E,t as f}from"./index-WxtyeiqM.js";import{u as T}from"./userProductsStore-E_I76wL3.js";import{s as P}from"./showSuccessToast-amH4LwP2.js";import{s as _}from"./showErrorToast-jtdzvrxD.js";import{m as w}from"./modalMixin-uvxk93tA.js";var A={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"runweiting",VITE_TEXT:"這是部屬完成的環境",BASE_URL:"/funtime-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const C=v.useLoading({}),{VITE_APP_URL:l,VITE_APP_PATH:c}=A,D=k("adminProductsStore",{mixins:[w],state:()=>({productList:[],pagination:{},editModalOpen:!0,delModalOpen:!0}),actions:{async getProducts(e,a=1){const t=C.show(),i=`${l}/api/${c}/admin/products?page=${a}`;try{const o=await u.get(i),{products:r,pagination:s}=o.data;this.productList=r,this.pagination=s}catch(o){_(o.response.data.message)}finally{t.hide()}},updateProduct(e,a){let t=`${l}/api/${c}/admin/product`,i="post";e||(t=`${l}/api/${c}/admin/product/${a.id}`,i="put"),u[i](t,{data:a}).then(o=>{P(o.data.message),this.editModalOpen=!1,this.getProducts()}).catch(o=>{_(o.response.data.message)})},upload(){const a=document.querySelector("#formFile").files[0],t=new FormData;t.append("file-to-upload",a);const i=`${l}/api/${c}/admin/upload`;u.post(i,t)},deleteProduct(e){const a=`${l}/api/${c}/admin/product/${e}`;u.delete(a).then(t=>{P(t.data.message),this.delModalOpen=!1,this.getProducts()}).catch(t=>{_(t.response.data.message)})}}}),I={emits:["page-selected"],data(){return{currentCategory:null}},computed:{...h(T,["pagination"]),...h(D,["pagination"])},methods:{selectedPage(e){this.$emit("page-selected",this.currentCategory,e)}}},L={class:"px-2"},M={"aria-label":"page-navigation"},V={class:"pagination"},O=n("span",{"aria-hidden":"true"},"«",-1),b=[O],R={key:0,class:"page-link"},B=["onClick"],F=n("span",{"aria-hidden":"true"},"»",-1),N=[F];function U(e,a,t,i,o,r){return d(),p("div",L,[n("nav",M,[n("ul",V,[n("li",{class:g([{disabled:e.pagination.current_page===1},"page-item"])},[n("a",{onClick:a[0]||(a[0]=m(s=>r.selectedPage(e.pagination.current_page-1),["prevent"])),class:"page-link",href:"#","aria-label":"Previous"},b)],2),(d(!0),p(y,null,E(e.pagination.total_pages,(s,$)=>(d(),p("li",{key:$,class:g([{active:s===e.pagination.current_page},"page-item"])},[s===e.pagination.current_page?(d(),p("span",R,f(s),1)):(d(),p("a",{key:1,onClick:m(x=>r.selectedPage(s),["prevent"]),class:"page-link",href:"#"},f(s),9,B))],2))),128)),n("li",{class:g([{disabled:e.pagination.current_page===e.pagination.total_pages},"page-item"])},[n("a",{onClick:a[1]||(a[1]=m(s=>r.selectedPage(e.pagination.current_page+1),["prevent"])),class:"page-link",href:"#","aria-label":"Next"},N)],2)])])])}const J=S(I,[["render",U]]);export{J as P,D as a};
