import{_ as m,G as p,r as _,o as f,c as h,b as s,e as l,v as c,d as w,w as g,g as x}from"./index-DW-YAaVl.js";import{s as v}from"./showSuccessToast-4Q0mJWPL.js";import{s as d}from"./showErrorToast-3Rr6__rM.js";var b={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"runweiting",BASE_URL:"/funtime-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:P}=b,k={data(){return{user:{username:"",password:""}}},methods:{login(){if(p()){this.$router.push({name:"admin/products"});return}const{username:a,password:e}=this.user;if(!a||!e){d("請填入登入信箱和密碼");return}const i=`${P}/admin/signin`;this.axios.post(i,this.user).then(t=>{const{expired:o,token:r}=t.data;document.cookie=`myToken=${r}; expires=${new Date(o)}`,v(t.data.message),this.$router.push({name:"admin/products"}),this.user={}}).catch(t=>{t.response&&t.response.status===400&&d("請輸入正確的帳號和密碼")})}}},T={class:"container"},V=s("h1",{class:"pt-5 text-center"},"登入後台",-1),y={class:"row py-5 flex-column align-items-center"},E=s("div",{class:"col-md-6 text-center mb-3"},[s("h3",null,"請先登入")],-1),L={class:"col-md-6"},R={class:"form-floating mb-3"},U=s("label",{for:"floatingInput"},"Email address",-1),I={class:"form-floating mb-3"},A=s("label",{for:"floatingPassword"},"Password",-1),D={class:"d-flex gap-2"},S=s("p",{class:"text-dark-gray text-center pt-5"},"© funtime",-1);function B(a,e,i,t,o,r){const u=_("RouterLink");return f(),h("main",T,[V,s("div",y,[E,s("div",L,[s("form",null,[s("div",R,[l(s("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>o.user.username=n),type:"email",class:"form-control",id:"floatingInput",autocomplete:"email"},null,512),[[c,o.user.username]]),U]),s("div",I,[l(s("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>o.user.password=n),type:"password",class:"form-control",id:"floatingPassword",placeholder:"Password",autocomplete:"current-password"},null,512),[[c,o.user.password]]),A]),s("div",D,[w(u,{to:"/",class:"btn btn-primary w-50"},{default:g(()=>[x("回到首頁")]),_:1}),s("button",{onClick:e[2]||(e[2]=(...n)=>r.login&&r.login(...n)),type:"button",class:"btn btn-primary w-50"}," 登入 ")])]),S])])])}const M=m(k,[["render",B]]);export{M as default};
