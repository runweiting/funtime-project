import{_ as Q,m as b,a as y,r as x,o as e,c as o,b as t,d as p,w as _,t as r,F as l,x as d,f as $,g as c,A as n,z as M}from"./index-B3z9oC5M.js";import{u as v}from"./userProductsStore-bd3BCqHk.js";import{u as w}from"./userCartStore-XF6m133z.js";import{u as k}from"./userOrderStore-QHOGZIhM.js";import{s as T}from"./showErrorToast-hDmZ5gkO.js";import{s as S}from"./showWarningToast-nQa_fie5.js";import"./showSuccessToast-cAGz1xrC.js";const N={mounted(){const{id:s}=this.$route.params;this.getProduct(s),this.getOrders(),this.calculateQty()},computed:{...b(v,["product"]),...b(k,["productQtyMap"]),...b(w,["cartList"])},methods:{...y(v,["getProduct"]),...y(k,["getOrders","calculateQty"]),...y(w,["addToCart","getCart"]),async handleAddToCart(s,g){if(await this.getCart(),this.cartList.length>0){S("請一次預購一個企劃");const u=this.cartList[0];this.$router.push({name:"cart",params:{id:u.product.id,units:u.qty}});return}try{this.addToCart(s,g),await this.getCart(s),this.$router.push({name:"cart",params:{id:s,units:g}})}catch(u){T(u)}}}},V={class:"mx-3 mx-lg-10"},A={class:"container px-lg-12","data-aos":"fade-up"},B={class:"row align-items-center px-xl-4"},L={class:"col"},D={class:"d-flex gap-2 mb-2","aria-label":"breadcrumb"},F={class:"text-dark-gray"},P=t("small",{class:"text-dark-gray"},"/",-1),R={class:"text-dark-gray"},q={class:"fs-4 card-title fw-bold"},E={class:"row row-cols-1 py-2 p-xl-4 row-cols-xl-2"},H={class:"col-xl-7 px-xl-4"},O={class:"h-100 d-flex flex-column justify-content-between gap-4"},U=["src"],z={class:"d-flex flex-column flex-sm-row justify-content-sm-between gap-2 mb-2"},G={class:"d-flex gap-2"},W={class:"d-flex align-items-baseline gap-3"},Y=t("small",{class:"text-dark-gray"},"提案人",-1),J={class:"text-dark-gray"},K={class:"col-xl-5 px-xl-4"},X={class:"h-100 d-flex flex-column justify-content-between gap-2"},Z={class:"row row-cols-1 align-items-center align-items-md-end row-cols-xl-1 gy-2"},I={class:"col-md-5"},tt={class:"d-flex gap-8 align-items-center"},st={class:"fst-italic"},et={class:"text-dark-gray"},ot={key:0,class:"fw-bold mt-2 mb-0"},rt={class:"fst-italic"},at=t("small",{class:"text-dark-gray text-start"},"預購人數",-1),it={key:0,class:"fw-bold mt-2 mb-0"},lt={class:"col-md-7"},dt={key:0,class:"progress",style:{width:"85%"}},ct={key:1},nt={class:"fw-bold"},pt={class:"card-text mb-0 text-gray-dark"},ut={class:"d-flex flex-xl-row gap-4"},ht={key:0,class:"bi bi-lightning-fill text-primary"},_t={key:1,class:"bi bi-people-fill text-primary"},mt={key:2,class:"bi bi-flag-fill text-primary"},gt={class:"text-dark-gray"},ft=$('<div class="rounded-5 border border-5 border-light p-3"><div class="d-flex"><i class="bi bi-circle-fill text-primary" style="scale:40%;"></i><span class="fs-6 fw-bold fst-italic text-black text-center">登記享優惠資格，無需先付款。</span></div><div class="d-flex"><i class="bi bi-circle-fill text-primary" style="scale:40%;"></i><span class="fs-6 fw-bold fst-italic text-black text-center">歡迎試玩、分享，越早實現企劃。</span></div></div><div class="d-flex justify-content-end align-items-center gap-6"><button type="button" class="btn p-0 hvr-pop text-primary"><i class="bi bi-line fs-4"></i></button><button type="button" class="btn p-0 hvr-pop text-primary"><i class="bi bi-facebook fs-4"></i></button><button type="button" class="btn p-0 hvr-pop text-primary"><i class="bi bi-share-fill fs-4"></i></button><button type="button" class="btn p-0 hvr-pop text-primary"><i class="bi bi-heart-fill fs-4"></i></button></div>',2),bt={class:"mx-3 mx-lg-10"},yt={class:"container bg-light-gray rounded-5 px-6 py-3 px-lg-12 px-xl-15"},xt={class:"row row-cols-1 row-cols-lg-2 align-items-center"},vt={class:"col-lg-7"},wt={class:"list-unstyled d-flex gap-6 mb-0"},kt=t("div",{class:"col-lg-5 d-none d-lg-block"},[t("div",{class:"d-flex gap-4"})],-1),Ct={class:"mx-3 mx-lg-10"},jt={class:"container px-lg-12"},Qt={class:"row row-cols-1 py-2 p-xl-4 pt-xl-8 row-cols-md-2"},$t={class:"col-md-5 px-xl-4"},Mt={class:"d-flex flex-column justify-content-between rounded-5 border border-5 border-light p-5 my-5"},Tt={class:"d-flex gap-2"},St=t("div",{class:"rounded-circle overflow-hidden",style:{width:"50px",height:"50px"}},[t("img",{src:"https://images.unsplash.com/photo-1535713875002-d1d0cf377fde?q=80&w=200&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"company-logo",class:"object-fit-cover img-fluid"})],-1),Nt={class:"d-flex flex-column justify-content-between"},Vt=t("small",{class:"text-dark-gray"},"提案人",-1),At={class:"text-dark-gray"},Bt={class:"position-lg-sticky",id:"targetSection"},Lt=["onClick"],Dt=["src"],Ft={class:"d-flex justify-content-between align-items-center"},Pt={class:"fs-6 text-dark-gray mb-0"},Rt={key:0,class:"d-none d-md-block fs-6 badge bg-danger"},qt={class:"d-flex justify-content-between align-items-center"},Et={class:"d-flex gap-2"},Ht={class:"fw-bold mb-0"},Ot={class:"badge bg-info-light text-black"},Ut={key:0,class:"d-md-none fs-6 badge bg-danger"},zt={class:"text-dark-gray"},Gt=t("small",{class:"text-dark-gray"},"一組內含：",-1),Wt={class:"list-unstyled mb-0"},Yt=t("hr",{class:"w-100 border-top my-1",style:{border:"3px dotted #8C8C8E"}},null,-1),Jt={class:"list-unstyled mb-0"},Kt=t("hr",{class:"w-100 border-top my-1",style:{border:"3px dotted #8C8C8E"}},null,-1),Xt=t("div",{class:"d-flex align-items-center gap-2"},[t("i",{class:"bi bi-check-circle-fill text-dark-secondary"}),t("small",null,"臺灣本島免運、可寄離島")],-1);function Zt(s,g,u,It,ts,C){const h=x("RouterLink"),j=x("RouterView");return e(),o(l,null,[t("div",V,[t("div",A,[t("div",B,[t("div",L,[t("nav",D,[t("small",F,[p(h,{to:{name:"home"},class:"nav-link text-decoration-none text-nowrap"},{default:_(()=>[c(r(s.$t("menu.home")),1)]),_:1})]),P,t("small",R,[p(h,{to:{name:"products"},class:"nav-link text-decoration-none text-nowrap"},{default:_(()=>[c(r(s.$t("menu.products")),1)]),_:1})])]),t("h2",q,r(s.product.title),1)])]),t("div",E,[t("div",H,[t("div",O,[t("img",{src:s.product.imageUrl,class:"card-img-top object-fit-cover img-fluid rounded",alt:"product-image",style:{"max-height":"400px"}},null,8,U),t("div",z,[t("div",G,[(e(!0),o(l,null,d(s.product.tags,(i,a)=>(e(),o("span",{key:a,class:"badge rounded-pill bg-primary text-white"},"# "+r(i),1))),128))]),t("div",W,[Y,t("small",J,r(s.product.proposer),1)])])])]),t("div",K,[t("div",X,[t("div",Z,[t("div",I,[t("div",tt,[t("div",st,[t("small",et,"目標 "+r(s.product.target_units)+" 組",1),(e(!0),o(l,null,d(s.productQtyMap,(i,a)=>(e(),o("div",{key:a},[s.product.id===a?(e(),o("h3",ot,"累計 "+r(i.productQty)+" 組",1)):n("",!0)]))),128))]),t("div",rt,[at,(e(!0),o(l,null,d(s.productQtyMap,(i,a)=>(e(),o("div",{key:a},[s.product.id===a?(e(),o("h3",it,r(i.orderQty)+" 人",1)):n("",!0)]))),128))])])]),t("div",lt,[(e(!0),o(l,null,d(s.productQtyMap,(i,a)=>(e(),o("div",{key:a,class:"d-flex justify-content-between align-items-center"},[s.product.id===a?(e(),o("div",dt,[s.product.id===a?(e(),o("div",{key:0,ref_for:!0,ref:"progressBar",class:"progress-bar progress-bar-striped progress-bar-animated bg-primary",role:"progressbar",style:M({width:(i.productQty/s.product.target_units*100).toFixed(2)+"%"})},null,4)):n("",!0)])):n("",!0),s.product.id===a?(e(),o("div",ct,[t("small",nt,r((i.productQty/s.product.target_units).toFixed(2)*100)+"%",1)])):n("",!0)]))),128))])]),t("p",pt,r(s.product.description),1),t("div",ut,[(e(!0),o(l,null,d(s.product.features,(i,a)=>(e(),o("div",{key:a,class:"d-flex justify-content-center gap-1"},[a===0?(e(),o("i",ht)):a===1?(e(),o("i",_t)):(e(),o("i",mt)),t("small",gt,r(i),1)]))),128))]),ft])])])])]),t("div",bt,[t("div",yt,[t("div",xt,[t("div",vt,[t("ul",wt,[t("li",null,[p(h,{to:{name:"product-content"},class:"text-gray text-decoration-none hvr-pop"},{default:_(()=>[c("專案內容")]),_:1})]),t("li",null,[p(h,{to:{name:"product-faq"},class:"text-gray text-decoration-none hvr-pop"},{default:_(()=>[c("常見問答")]),_:1})]),t("li",null,[p(h,{to:{name:"product-message"},class:"text-gray text-decoration-none hvr-pop"},{default:_(()=>[c("留言")]),_:1})])])]),kt])])]),t("div",Ct,[t("div",jt,[t("div",Qt,[p(j),t("div",$t,[t("div",Mt,[t("div",Tt,[St,t("div",Nt,[Vt,t("span",At,r(s.product.proposer),1)])])]),t("div",Bt,[(e(!0),o(l,null,d(s.product.packages,(i,a)=>(e(),o("div",{key:a,class:"d-flex flex-column justify-content-between rounded-5 border border-5 border-light p-5 gap-3 mb-4 position-relative hvr-card shadow-sm",style:{cursor:"pointer"}},[t("a",{onClick:m=>C.handleAddToCart(s.product.id,i.units),class:"stretched-link"},null,8,Lt),t("img",{src:s.product.imageUrl,alt:"product-image",class:"card-img-top object-fit-cover img-fluid rounded",style:{"max-height":"100px"}},null,8,Dt),t("div",Ft,[t("h3",Pt,r(i.name),1),s.productQtyMap[s.product.id]?(e(),o("span",Rt,"剩 "+r(s.product.target_units-s.productQtyMap[s.product.id].productQty)+" 組",1)):n("",!0)]),t("div",qt,[t("div",Et,[t("h5",Ht,"NT$ "+r(s.product.origin_price*s.product.discount*i.units),1),t("span",Ot,r(s.product.discount*100)+"折",1)]),s.productQtyMap[s.product.id]?(e(),o("span",Ut,"剩 "+r(s.product.target_units-s.productQtyMap[s.product.id].productQty)+" 組",1)):n("",!0)]),t("small",zt,[c("預定售價 "),t("del",null,"NT$ "+r(s.product.origin_price),1),c("，現省 NT$ "+r((s.product.origin_price-s.product.origin_price*s.product.discount)*i.units),1)]),t("div",null,[Gt,t("ul",Wt,[(e(!0),o(l,null,d(s.product.contents,(m,f)=>(e(),o("li",{key:f},r(m),1))),128))])]),Yt,t("ul",Jt,[(e(!0),o(l,null,d(s.product.notes,(m,f)=>(e(),o("li",{key:f},r(m),1))),128))]),Kt,Xt]))),128))])])])])])],64)}const ds=Q(N,[["render",Zt]]);export{ds as default};
